<!DOCTYPE html>
<html>
  <head>
    <title>Zodiac I Ching</title>
    <style>
        columns {display: flex; flex-direction: column;}
        rows {display: flex; flex-direction: row;}
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"> </script> 
    <script>
        // ⤵⤴⤶⤷⤸⤹⤺⤻⤾⤿➕➖
        let currentSymbol = 0
        let currentMenuItem = 0
        let currentLoShuElement = 0
        let currentLoShuHexagram = "FirePastPastData"
        let randomId = null
        let paperObjects = []
        
            /*
            * 0 Julian day
            * 1-10 Planetary Position(Geocentric apparent ecliptic longitude): Sun, Moon, Mercury, Venus, Mars, Jupiter, Saturn, Uranus, Neptune, Pluto
            * 11, 12 Lunar Node & apogee Longitude(from approximate osculate orbital elements)
            * 13, 14 Longitude of Ascendant, MC(Mid heaven)
            * All value is expressed in degree, without Julian day.
            */
            function calPlanetPosition2( ye, mo, da, ho, mi, lon, lat ){
            var i;

            var JD   = calJD( ye, mo, da, ho, mi );
            var lst  = calLST( JD, ho, mi, lon );
            var date = ye * 10000 + mo * 100 + da * 1;
            var plapos = new Array();

            JD += correctTDT( JD );
            var coef = calTimeCoefficient( JD );
            var d = coef[ 0 ];
            var T = coef[ 1 ];

            plapos[ 0 ] = JD;

            for( var i = 1; i <= 10; i++ ){
                plapos[ i ] = calPlaPos( JD, i );
            }

            var luna = new Array( 2 );
            luna = calPositLuna( JD );
            plapos[ 11 ] = luna[ 0 ];
            plapos[ 12 ] = luna[ 1 ];

            var obl = calOblique( JD );
            var angle = new Array( 2 );
            angle = calGeoPoint( lst, lat, obl );
            plapos[13] = angle[ 0 ];
            plapos[14] = angle[ 1 ];

            var dpsi = calNutation( JD ) / 3600.0;
            for( var i = 1; i <= 12; i++){
                plapos[ i ] -= dpsi;
                if( plapos[ i ] <    0.0){
                    plapos[ i ] += 360.0;
                } else if( plapos[ i ] >= 360.0){
                    plapos[ i ] -= 360.0;
                }
            }

            return plapos;
        }
        function calPlaPos( JD, pid ){
            var T  = ( JD - 2451545.0 ) /  36525.0;
            var T2 = ( JD - 2451545.0 ) / 365250.0;

            var C = [0.00347, 0.00484, 0.00700, 0.01298, 0.01756, 0.02490, 0.03121, 0.03461];
            var dl;
            var epos = new Array(3);
            var gpos = new Array(3);
            var ppos = new Array(3);

            epos = calPositSO( T2 );
            if( pid == 1 ){
                gpos[ 0 ] = epos[ 0 ] - 0.005693 / epos[ 2 ];
            } else if( pid == 2 ){
                gpos = calPositMO(T);
            } else {
                switch( pid ){
                    case 3:
                        ppos = calPositME( T2 );
                        break;
                    case 4:
                        ppos = calPositVE( T2 );
                        break;
                    case 5:
                        ppos = calPositMA( T2 );
                        break;
                    case 6:
                        ppos = calPositJU( T2 );
                        break;
                    case 7:
                        ppos = calPositSA( T2 );
                        break;
                    case 8:
                        ppos = calPositUR( T2 );
                        break;
                    case 9:
                        ppos = calPositNE( T2 );
                        break;
                    case 10:
                        if( -1.15 <= T && T < 1.0 ){ // Pluto_mee valids thru 1885-2099
                            ppos = calPositPL_mee( T );
                        } else { // Pluto_obspm valids thru -3000 - 3000, but intentionally uses to 0 - 4000
                            ppos = calPositPL_obspm( T );
                        }
                        ppos[ 0 ] += 5029.0966 / 3600.0 * T;  // ���^�ߎ��̍΍��␳����
                        break;
                }
                gpos = convertGeocentric( epos, ppos );
                dl  = -0.005693  * Math.cos( ( gpos[ 0 ] - epos[ 0 ] ) * Math.PI / 180.0 );
                dl -= C[ pid - 3 ] * Math.cos( ( gpos[ 0 ] - ppos[ 0 ] ) * Math.PI / 180.0 ) / ppos[ 2 ];
                gpos[ 0 ] += dl;
            }

            return gpos[ 0 ];
        }
        function calPositMO( T ){
            var mf = new Array();
            var dl, db;

        // Mean Longitude of the Moon(J2000.0)
            var W1 = 481266.0 * T;
            W1  = mod360( W1 );
            W1 +=   0.48437 * T;
            W1 -=   0.00163 * T * T;
            W1 += 218.31665;
            W1  = mod360( W1 );

        // D : Mean elongation of the Moon
            mf[0]  = 445267.0 * T;
            mf[0]  = mod360( mf[0] );
            mf[0] +=   0.11151 * T;
            mf[0] -=   0.00163 * T * T;
            mf[0] += 297.85020;
            mf[0]  = mod360( mf[0] );

        // l' : Mean anomary of the Sun
            mf[1]  =  35999.0 * T;
            mf[1]  = mod360( mf[1] );
            mf[1] +=   0.05029 * T;
            mf[1] -=   0.00015 * T * T;
            mf[1] += 357.51687;
            mf[1]  = mod360( mf[1] );

        // l : Mean anomary of the Moon
            mf[2]  = 477198.0 * T;
            mf[2]  = mod360( mf[2] );
            mf[2] +=   0.86763  * T;
            mf[2] +=   0.008997 * T * T;
            mf[2] += 134.96341;
            mf[2]  = mod360( mf[2] );

        // F : Argument of latitude of the Moon
            mf[3]  = 483202.0 * T;
            mf[3]  = mod360( mf[3] );
            mf[3] +=   0.01753 * T;
            mf[3] -=   0.00340 * T * T;
            mf[3] +=  93.27210;
            mf[3]  = mod360( mf[3] );

            dl  = +6.28876 * sin4deg(0 * mf[0] + 0 * mf[1] + 1 * mf[2] + 0 * mf[3]);
            dl += +1.27401 * sin4deg(2 * mf[0] + 0 * mf[1] - 1 * mf[2] + 0 * mf[3]);
            dl += +0.65831 * sin4deg(2 * mf[0] + 0 * mf[1] + 0 * mf[2] + 0 * mf[3]);
            dl += +0.21362 * sin4deg(0 * mf[0] + 0 * mf[1] + 2 * mf[2] + 0 * mf[3]);
            dl += -0.18512 * sin4deg(0 * mf[0] + 1 * mf[1] + 0 * mf[2] + 0 * mf[3]);
            dl += -0.11433 * sin4deg(0 * mf[0] + 0 * mf[1] + 0 * mf[2] + 2 * mf[3]);
            dl += +0.05879 * sin4deg(2 * mf[0] + 0 * mf[1] - 2 * mf[2] + 0 * mf[3]);
            dl += +0.05707 * sin4deg(2 * mf[0] - 1 * mf[1] - 1 * mf[2] + 0 * mf[3]);
            dl += +0.05332 * sin4deg(2 * mf[0] + 0 * mf[1] + 1 * mf[2] + 0 * mf[3]);
            dl += +0.04576 * sin4deg(2 * mf[0] - 1 * mf[1] + 0 * mf[2] + 0 * mf[3]);
            dl += -0.04092 * sin4deg(0 * mf[0] + 1 * mf[1] - 1 * mf[2] + 0 * mf[3]);
            dl += -0.03472 * sin4deg(1 * mf[0] + 0 * mf[1] + 0 * mf[2] + 0 * mf[3]);
            dl += -0.03038 * sin4deg(0 * mf[0] + 1 * mf[1] + 1 * mf[2] + 0 * mf[3]);
            dl += +0.01533 * sin4deg(2 * mf[0] + 0 * mf[1] + 0 * mf[2] - 2 * mf[3]);
            dl += -0.01253 * sin4deg(0 * mf[0] + 0 * mf[1] + 1 * mf[2] + 2 * mf[3]);
            dl += +0.01098 * sin4deg(0 * mf[0] + 0 * mf[1] + 1 * mf[2] - 2 * mf[3]);
            dl += +0.01067 * sin4deg(4 * mf[0] + 0 * mf[1] - 1 * mf[2] + 0 * mf[3]);
            dl += +0.01003 * sin4deg(0 * mf[0] + 0 * mf[1] + 3 * mf[2] + 0 * mf[3]);
            dl += +0.00855 * sin4deg(4 * mf[0] + 0 * mf[1] - 2 * mf[2] + 0 * mf[3]);

            db  = +5.12817 * sin4deg(0 * mf[0] + 0 * mf[1] + 0 * mf[2] + 1 * mf[3]);
            db += +0.27769 * sin4deg(0 * mf[0] + 0 * mf[1] + 1 * mf[2] - 1 * mf[3]);
            db += +0.28060 * sin4deg(0 * mf[0] + 0 * mf[1] + 1 * mf[2] + 1 * mf[3]);
            db += +0.00882 * sin4deg(0 * mf[0] + 0 * mf[1] + 2 * mf[2] - 1 * mf[3]);
            db += +0.01720 * sin4deg(0 * mf[0] + 0 * mf[1] + 2 * mf[2] + 1 * mf[3]);
            db += +0.04627 * sin4deg(2 * mf[0] + 0 * mf[1] - 1 * mf[2] - 1 * mf[3]);
            db += +0.05541 * sin4deg(2 * mf[0] + 0 * mf[1] - 1 * mf[2] + 1 * mf[3]);
            db += +0.17324 * sin4deg(2 * mf[0] + 0 * mf[1] + 0 * mf[2] - 1 * mf[3]);
            db += +0.03257 * sin4deg(2 * mf[0] + 0 * mf[1] + 0 * mf[2] + 1 * mf[3]);
            db += +0.00927 * sin4deg(2 * mf[0] + 0 * mf[1] + 1 * mf[2] - 1 * mf[3]);

            W1 += dl + 5029.0966 / 3600.0 * T;

            var res = new Array( W1, db );
            return res;
        }
        function calPositME( T ){
            var lo = 0.0;
            var bo = 0.0;
            var ro = 0.0;
            var Lon = new Array();
            var Lat = new Array();
            var Rad = new Array();

        // Mercury's Longitude
            Lon[0]  =     4.40251 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[0] +=     0.40989 * Math.cos( 1.48302 +   26087.90314 * T);
            Lon[0] +=     0.05046 * Math.cos( 4.47785 +   52175.80628 * T);
            Lon[0] +=     0.00855 * Math.cos( 1.16520 +   78263.70942 * T);
            Lon[0] +=     0.00166 * Math.cos( 4.11969 +  104351.61257 * T);
            Lon[0] +=     0.00035 * Math.cos( 0.77931 +  130439.51571 * T);
            Lon[1]  = 26088.14706 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[1] +=     0.01126 * Math.cos( 6.21704 +   26087.90314 * T);
            Lon[1] +=     0.00303 * Math.cos( 3.05565 +   52175.80628 * T);
            Lon[1] +=     0.00081 * Math.cos( 6.10455 +   78263.70942 * T);
            Lon[1] +=     0.00021 * Math.cos( 2.83532 +  104351.61257 * T);
            Lon[2]  =     0.00053 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[2] +=     0.00017 * Math.cos( 4.69072 +   26087.90314 * T);
        // Mercury's Latitude
            Lat[0]  =     0.11738 * Math.cos( 1.98357 +   26087.90314 * T);
            Lat[0] +=     0.02388 * Math.cos( 5.03739 +   52175.80628 * T);
            Lat[0] +=     0.01223 * Math.cos( 3.14159 +       0.00000 * T);
            Lat[0] +=     0.00543 * Math.cos( 1.79644 +   78263.70942 * T);
            Lat[0] +=     0.00130 * Math.cos( 4.83233 +  104351.61257 * T);
            Lat[0] +=     0.00032 * Math.cos( 1.58088 +  130439.51571 * T);
            Lat[1]  =     0.00429 * Math.cos( 3.50170 +   26087.90314 * T);
            Lat[1] +=     0.00146 * Math.cos( 3.14159 +       0.00000 * T);
            Lat[1] +=     0.00023 * Math.cos( 0.01515 +   52175.80628 * T);
            Lat[1] +=     0.00011 * Math.cos( 0.48540 +   78263.70942 * T);
            Lat[2]  =     0.00012 * Math.cos( 4.79066 +   26087.90314 * T);
        // Mercury's Radius Vector
            Rad[0]  =     0.39528 * Math.cos( 0.00000 +       0.00000 * T);
            Rad[0] +=     0.07834 * Math.cos( 6.19234 +   26087.90314 * T);
            Rad[0] +=     0.00796 * Math.cos( 2.95990 +   52175.80628 * T);
            Rad[0] +=     0.00121 * Math.cos( 6.01064 +   78263.70942 * T);
            Rad[0] +=     0.00022 * Math.cos( 2.77820 +  104351.61257 * T);
            Rad[1]  =     0.00217 * Math.cos( 4.65617 +   26087.90314 * T);
            Rad[1] +=     0.00044 * Math.cos( 1.42386 +   52175.80628 * T);
            Rad[1] +=     0.00010 * Math.cos( 4.47466 +   78263.70942 * T);

            lo = mod360( calVsopTerm( T, Lon ) / deg2rad);
            bo = calVsopTerm( T, Lat ) / deg2rad;
            ro = calVsopTerm( T, Rad );

            var res = new Array( lo, bo, ro );
            return res;
        }
        function calPositVE( T ){
            var lo = 0.0;
            var bo = 0.0;
            var ro = 0.0;
            var Lon = new Array();
            var Lat = new Array();
            var Rad = new Array();

        // Venus's Longitude
            Lon[0]  =     3.17615 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[0] +=     0.01354 * Math.cos( 5.59313 +   10213.28555 * T);
            Lon[0] +=     0.00090 * Math.cos( 5.30650 +   20426.57109 * T);
            Lon[1]  = 10213.52943 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[1] +=     0.00096 * Math.cos( 2.46424 +   10213.28555 * T);
            Lon[1] +=     0.00014 * Math.cos( 0.51625 +   20426.57109 * T);
            Lon[2]  =     0.00054 * Math.cos( 0.00000 +       0.00000 * T);
        // Venus's Latitude
            Lat[0]  =     0.05924 * Math.cos( 0.26703 +   10213.28555 * T);
            Lat[0] +=     0.00040 * Math.cos( 1.14737 +   20426.57109 * T);
            Lat[0] +=     0.00033 * Math.cos( 3.14159 +       0.00000 * T);
            Lat[1]  =     0.00513 * Math.cos( 1.80364 +   10213.28555 * T);
            Lat[2]  =     0.00022 * Math.cos( 3.38509 +   10213.28555 * T);
        // Venus's Radius Vector
            Rad[0]  =     0.72335 * Math.cos( 0.00000 +       0.00000 * T);
            Rad[0] +=     0.00490 * Math.cos( 4.02152 +   10213.28555 * T);
            Rad[1]  =     0.00035 * Math.cos( 0.89199 +   10213.28555 * T);

            lo = mod360( calVsopTerm( T, Lon ) / deg2rad);
            bo = calVsopTerm( T, Lat ) / deg2rad;
            ro = calVsopTerm( T, Rad );

            var res = new Array( lo, bo, ro );
            return res;
        }
        function calPositMA( T ){
            var lo = 0.0;
            var bo = 0.0;
            var ro = 0.0;
            var Lon = new Array();
            var Lat = new Array();
            var Rad = new Array();

        // Mars's Longitude
            Lon[0]  =     6.20348 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[0] +=     0.18656 * Math.cos( 5.05037 +    3340.61243 * T);
            Lon[0] +=     0.01108 * Math.cos( 5.40100 +    6681.22485 * T);
            Lon[0] +=     0.00092 * Math.cos( 5.75479 +   10021.83728 * T);
            Lon[0] +=     0.00028 * Math.cos( 5.97050 +       3.52312 * T);
            Lon[0] +=     0.00011 * Math.cos( 2.93959 +    2281.23050 * T);
            Lon[0] +=     0.00012 * Math.cos( 0.84956 +    2810.92146 * T);
            Lon[1]  =  3340.85627 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[1] +=     0.01458 * Math.cos( 3.60426 +    3340.61243 * T);
            Lon[1] +=     0.00165 * Math.cos( 3.92631 +    6681.22485 * T);
            Lon[1] +=     0.00020 * Math.cos( 4.26594 +   10021.83728 * T);
            Lon[2]  =     0.00058 * Math.cos( 2.04979 +    3340.61243 * T);
            Lon[2] +=     0.00054 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[2] +=     0.00014 * Math.cos( 2.45742 +    6681.22485 * T);
        // Mars's Latitude
            Lat[0]  =     0.03197 * Math.cos( 3.76832 +    3340.61243 * T);
            Lat[0] +=     0.00298 * Math.cos( 4.10617 +    6681.22485 * T);
            Lat[0] +=     0.00289 * Math.cos( 0.00000 +       0.00000 * T);
            Lat[0] +=     0.00031 * Math.cos( 4.44651 +   10021.83728 * T);
            Lat[1]  =     0.00350 * Math.cos( 5.36848 +    3340.61243 * T);
            Lat[1] +=     0.00014 * Math.cos( 3.14159 +       0.00000 * T);
            Lat[1] +=     0.00010 * Math.cos( 5.47878 +    6681.22485 * T);
            Lat[2]  =     0.00017 * Math.cos( 0.60221 +    3340.61243 * T);
        // Mars's Radius Vector
            Rad[0]  =     1.53033 * Math.cos( 0.00000 +       0.00000 * T);
            Rad[0] +=     0.14185 * Math.cos( 3.47971 +    3340.61243 * T);
            Rad[0] +=     0.00661 * Math.cos( 3.81783 +    6681.22485 * T);
            Rad[0] +=     0.00046 * Math.cos( 4.15595 +   10021.83728 * T);
            Rad[1]  =     0.01107 * Math.cos( 2.03251 +    3340.61243 * T);
            Rad[1] +=     0.00103 * Math.cos( 2.37072 +    6681.22485 * T);
            Rad[1] +=     0.00013 * Math.cos( 0.00000 +       0.00000 * T);
            Rad[1] +=     0.00011 * Math.cos( 2.70888 +   10021.83728 * T);
            Rad[2]  =     0.00044 * Math.cos( 0.47931 +    3340.61243 * T);

            lo = mod360( calVsopTerm( T, Lon ) / deg2rad);
            bo = calVsopTerm( T, Lat ) / deg2rad;
            ro = calVsopTerm( T, Rad );

            var res = new Array( lo, bo, ro );
            return res;
        }
        function calPositJU( T ){
            var lo = 0.0;
            var bo = 0.0;
            var ro = 0.0;
            var Lon = new Array();
            var Lat = new Array();
            var Rad = new Array();

        // Jupiter's Longitude
            Lon[0]  =     0.59955 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[0] +=     0.09696 * Math.cos( 5.06192 +     529.69097 * T);
            Lon[0] +=     0.00574 * Math.cos( 1.44406 +       7.11355 * T);
            Lon[0] +=     0.00306 * Math.cos( 5.41735 +    1059.38193 * T);
            Lon[0] +=     0.00097 * Math.cos( 4.14265 +     632.78374 * T);
            Lon[0] +=     0.00073 * Math.cos( 3.64043 +     522.57742 * T);
            Lon[0] +=     0.00064 * Math.cos( 3.41145 +     103.09277 * T);
            Lon[0] +=     0.00040 * Math.cos( 2.29377 +     419.48464 * T);
            Lon[0] +=     0.00039 * Math.cos( 1.27232 +     316.39187 * T);
            Lon[0] +=     0.00028 * Math.cos( 1.78455 +     536.80451 * T);
            Lon[0] +=     0.00014 * Math.cos( 5.77481 +    1589.07290 * T);
            Lon[1]  =   529.93481 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[1] +=     0.00490 * Math.cos( 4.22067 +     529.69097 * T);
            Lon[1] +=     0.00229 * Math.cos( 6.02647 +       7.11355 * T);
            Lon[1] +=     0.00028 * Math.cos( 4.57266 +    1059.38193 * T);
            Lon[1] +=     0.00021 * Math.cos( 5.45939 +     522.57742 * T);
            Lon[1] +=     0.00012 * Math.cos( 0.16986 +     536.80451 * T);
            Lon[2]  =     0.00047 * Math.cos( 4.32148 +       7.11355 * T);
            Lon[2] +=     0.00031 * Math.cos( 2.93021 +     529.69097 * T);
            Lon[2] +=     0.00039 * Math.cos( 0.00000 +       0.00000 * T);
        // Jupiter's Latitude
            Lat[0]  =     0.02269 * Math.cos( 3.55853 +     529.69097 * T);
            Lat[0] +=     0.00110 * Math.cos( 3.90809 +    1059.38193 * T);
            Lat[0] +=     0.00110 * Math.cos( 0.00000 +       0.00000 * T);
            Lat[1]  =     0.00177 * Math.cos( 5.70166 +     529.69097 * T);
        // Jupiter's Radius Vector
            Rad[0]  =     5.20887 * Math.cos( 0.00000 +       0.00000 * T);
            Rad[0] +=     0.25209 * Math.cos( 3.49109 +     529.69097 * T);
            Rad[0] +=     0.00611 * Math.cos( 3.84115 +    1059.38193 * T);
            Rad[0] +=     0.00282 * Math.cos( 2.57420 +     632.78374 * T);
            Rad[0] +=     0.00188 * Math.cos( 2.07590 +     522.57742 * T);
            Rad[0] +=     0.00087 * Math.cos( 0.71001 +     419.48464 * T);
            Rad[0] +=     0.00072 * Math.cos( 0.21466 +     536.80451 * T);
            Rad[0] +=     0.00066 * Math.cos( 5.97996 +     316.39187 * T);
            Rad[0] +=     0.00029 * Math.cos( 1.67759 +     103.09277 * T);
            Rad[0] +=     0.00030 * Math.cos( 2.16132 +     949.17561 * T);
            Rad[0] +=     0.00023 * Math.cos( 3.54023 +     735.87651 * T);
            Rad[0] +=     0.00022 * Math.cos( 4.19363 +    1589.07290 * T);
            Rad[0] +=     0.00024 * Math.cos( 0.27458 +       7.11355 * T);
            Rad[0] +=     0.00013 * Math.cos( 2.96043 +    1162.47470 * T);
            Rad[0] +=     0.00010 * Math.cos( 1.90670 +     206.18555 * T);
            Rad[0] +=     0.00013 * Math.cos( 2.71550 +    1052.26838 * T);
            Rad[1]  =     0.01272 * Math.cos( 2.64938 +     529.69097 * T);
            Rad[1] +=     0.00062 * Math.cos( 3.00076 +    1059.38193 * T);
            Rad[1] +=     0.00053 * Math.cos( 3.89718 +     522.57742 * T);
            Rad[1] +=     0.00031 * Math.cos( 4.88277 +     536.80451 * T);
            Rad[1] +=     0.00041 * Math.cos( 0.00000 +       0.00000 * T);
            Rad[1] +=     0.00012 * Math.cos( 2.41330 +     419.48464 * T);
            Rad[2]  =     0.00080 * Math.cos( 1.35866 +     529.69097 * T);

            lo = mod360( calVsopTerm( T, Lon ) / deg2rad);
            bo = calVsopTerm( T, Lat ) / deg2rad;
            ro = calVsopTerm( T, Rad );

            var res = new Array( lo, bo, ro );
            return res;
        }
        function calPositSA( T ){
            var lo = 0.0;
            var bo = 0.0;
            var ro = 0.0;
            var Lon = new Array();
            var Lat = new Array();
            var Rad = new Array();

        // Saturn's Longitude
            Lon[0]  =     0.87401 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[0] +=     0.11108 * Math.cos( 3.96205 +     213.29910 * T);
            Lon[0] +=     0.01414 * Math.cos( 4.58582 +       7.11355 * T);
            Lon[0] +=     0.00398 * Math.cos( 0.52112 +     206.18555 * T);
            Lon[0] +=     0.00351 * Math.cos( 3.30330 +     426.59819 * T);
            Lon[0] +=     0.00207 * Math.cos( 0.24658 +     103.09277 * T);
            Lon[0] +=     0.00079 * Math.cos( 3.84007 +     220.41264 * T);
            Lon[0] +=     0.00024 * Math.cos( 4.66977 +     110.20632 * T);
            Lon[0] +=     0.00017 * Math.cos( 0.43719 +     419.48464 * T);
            Lon[0] +=     0.00015 * Math.cos( 5.76903 +     316.39187 * T);
            Lon[0] +=     0.00016 * Math.cos( 0.93809 +     632.78374 * T);
            Lon[0] +=     0.00015 * Math.cos( 1.56519 +       3.93215 * T);
            Lon[0] +=     0.00013 * Math.cos( 4.44891 +      14.22709 * T);
            Lon[0] +=     0.00015 * Math.cos( 2.71670 +     639.89729 * T);
            Lon[0] +=     0.00013 * Math.cos( 5.98119 +      11.04570 * T);
            Lon[0] +=     0.00011 * Math.cos( 3.12940 +     202.25340 * T);
            Lon[1]  =   213.54296 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[1] +=     0.01297 * Math.cos( 1.82821 +     213.29910 * T);
            Lon[1] +=     0.00564 * Math.cos( 2.88500 +       7.11355 * T);
            Lon[1] +=     0.00098 * Math.cos( 1.08070 +     426.59819 * T);
            Lon[1] +=     0.00108 * Math.cos( 2.27770 +     206.18555 * T);
            Lon[1] +=     0.00040 * Math.cos( 2.04128 +     220.41264 * T);
            Lon[1] +=     0.00020 * Math.cos( 1.27955 +     103.09277 * T);
            Lon[1] +=     0.00011 * Math.cos( 2.74880 +      14.22709 * T);
            Lon[2]  =     0.00116 * Math.cos( 1.17988 +       7.11355 * T);
            Lon[2] +=     0.00092 * Math.cos( 0.07425 +     213.29910 * T);
            Lon[2] +=     0.00091 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[2] +=     0.00015 * Math.cos( 4.06492 +     206.18555 * T);
            Lon[2] +=     0.00011 * Math.cos( 0.25778 +     220.41264 * T);
            Lon[2] +=     0.00011 * Math.cos( 5.40964 +     426.59819 * T);
            Lon[3]  =     0.00016 * Math.cos( 5.73945 +       7.11355 * T);
        // Saturn's Latitude
            Lat[0]  =     0.04331 * Math.cos( 3.60284 +     213.29910 * T);
            Lat[0] +=     0.00240 * Math.cos( 2.85238 +     426.59819 * T);
            Lat[0] +=     0.00085 * Math.cos( 0.00000 +       0.00000 * T);
            Lat[0] +=     0.00031 * Math.cos( 3.48442 +     220.41264 * T);
            Lat[0] +=     0.00034 * Math.cos( 0.57297 +     206.18555 * T);
            Lat[0] +=     0.00015 * Math.cos( 2.11847 +     639.89729 * T);
            Lat[0] +=     0.00010 * Math.cos( 5.79003 +     419.48464 * T);
            Lat[1]  =     0.00398 * Math.cos( 5.33290 +     213.29910 * T);
            Lat[1] +=     0.00049 * Math.cos( 3.14159 +       0.00000 * T);
            Lat[1] +=     0.00019 * Math.cos( 6.09919 +     426.59819 * T);
            Lat[1] +=     0.00015 * Math.cos( 2.30586 +     206.18555 * T);
            Lat[1] +=     0.00010 * Math.cos( 1.69675 +     220.41264 * T);
            Lat[2]  =     0.00021 * Math.cos( 0.50482 +     213.29910 * T);
        // Saturn's Radius Vector
            Rad[0]  =     9.55758 * Math.cos( 0.00000 +       0.00000 * T);
            Rad[0] +=     0.52921 * Math.cos( 2.39226 +     213.29910 * T);
            Rad[0] +=     0.01874 * Math.cos( 5.23550 +     206.18555 * T);
            Rad[0] +=     0.01465 * Math.cos( 1.64763 +     426.59819 * T);
            Rad[0] +=     0.00822 * Math.cos( 5.93520 +     316.39187 * T);
            Rad[0] +=     0.00548 * Math.cos( 5.01533 +     103.09277 * T);
            Rad[0] +=     0.00372 * Math.cos( 2.27115 +     220.41264 * T);
            Rad[0] +=     0.00362 * Math.cos( 3.13904 +       7.11355 * T);
            Rad[0] +=     0.00141 * Math.cos( 5.70407 +     632.78374 * T);
            Rad[0] +=     0.00109 * Math.cos( 3.29314 +     110.20632 * T);
            Rad[0] +=     0.00069 * Math.cos( 5.94100 +     419.48464 * T);
            Rad[0] +=     0.00061 * Math.cos( 0.94038 +     639.89729 * T);
            Rad[0] +=     0.00049 * Math.cos( 1.55733 +     202.25340 * T);
            Rad[0] +=     0.00034 * Math.cos( 0.19519 +     277.03499 * T);
            Rad[0] +=     0.00032 * Math.cos( 5.47085 +     949.17561 * T);
            Rad[0] +=     0.00021 * Math.cos( 0.46349 +     735.87651 * T);
            Rad[0] +=     0.00021 * Math.cos( 1.52103 +     433.71174 * T);
            Rad[0] +=     0.00021 * Math.cos( 5.33256 +     199.07200 * T);
            Rad[0] +=     0.00015 * Math.cos( 3.05944 +     529.69097 * T);
            Rad[0] +=     0.00014 * Math.cos( 2.60434 +     323.50542 * T);
            Rad[0] +=     0.00012 * Math.cos( 5.98051 +     846.08283 * T);
            Rad[0] +=     0.00011 * Math.cos( 1.73106 +     522.57742 * T);
            Rad[0] +=     0.00013 * Math.cos( 1.64892 +     138.51750 * T);
            Rad[0] +=     0.00010 * Math.cos( 5.20476 +    1265.56748 * T);
            Rad[1]  =     0.06183 * Math.cos( 0.25844 +     213.29910 * T);
            Rad[1] +=     0.00507 * Math.cos( 0.71115 +     206.18555 * T);
            Rad[1] +=     0.00341 * Math.cos( 5.79636 +     426.59819 * T);
            Rad[1] +=     0.00188 * Math.cos( 0.47216 +     220.41264 * T);
            Rad[1] +=     0.00186 * Math.cos( 3.14159 +       0.00000 * T);
            Rad[1] +=     0.00144 * Math.cos( 1.40745 +       7.11355 * T);
            Rad[1] +=     0.00050 * Math.cos( 6.01744 +     103.09277 * T);
            Rad[1] +=     0.00021 * Math.cos( 5.09246 +     639.89729 * T);
            Rad[1] +=     0.00020 * Math.cos( 1.17560 +     419.48464 * T);
            Rad[1] +=     0.00019 * Math.cos( 1.60820 +     110.20632 * T);
            Rad[1] +=     0.00013 * Math.cos( 5.94330 +     433.71174 * T);
            Rad[1] +=     0.00014 * Math.cos( 0.75886 +     199.07200 * T);
            Rad[2]  =     0.00437 * Math.cos( 4.78672 +     213.29910 * T);
            Rad[2] +=     0.00072 * Math.cos( 2.50070 +     206.18555 * T);
            Rad[2] +=     0.00050 * Math.cos( 4.97168 +     220.41264 * T);
            Rad[2] +=     0.00043 * Math.cos( 3.86940 +     426.59819 * T);
            Rad[2] +=     0.00030 * Math.cos( 5.96310 +       7.11355 * T);
            Rad[3]  =     0.00020 * Math.cos( 3.02187 +     213.29910 * T);

            lo = mod360( calVsopTerm( T, Lon ) / deg2rad);
            bo = calVsopTerm( T, Lat ) / deg2rad;
            ro = calVsopTerm( T, Rad );

            var res = new Array( lo, bo, ro );
            return res;
        }

        function calPositUR( T ){
            var lo = 0.0;
            var bo = 0.0;
            var ro = 0.0;
            var Lon = new Array();
            var Lat = new Array();
            var Rad = new Array();

        // Uranus's Longitude
            Lon[0]  =     5.48129 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[0] +=     0.09260 * Math.cos( 0.89106 +      74.78160 * T);
            Lon[0] +=     0.01504 * Math.cos( 3.62719 +       1.48447 * T);
            Lon[0] +=     0.00366 * Math.cos( 1.89962 +      73.29713 * T);
            Lon[0] +=     0.00272 * Math.cos( 3.35824 +     149.56320 * T);
            Lon[0] +=     0.00070 * Math.cos( 5.39254 +      63.73590 * T);
            Lon[0] +=     0.00069 * Math.cos( 6.09292 +      76.26607 * T);
            Lon[0] +=     0.00062 * Math.cos( 2.26952 +       2.96895 * T);
            Lon[0] +=     0.00062 * Math.cos( 2.85099 +      11.04570 * T);
            Lon[0] +=     0.00026 * Math.cos( 3.14152 +      71.81265 * T);
            Lon[0] +=     0.00026 * Math.cos( 6.11380 +     454.90937 * T);
            Lon[0] +=     0.00021 * Math.cos( 4.36059 +     148.07872 * T);
            Lon[0] +=     0.00018 * Math.cos( 1.74437 +      36.64856 * T);
            Lon[0] +=     0.00015 * Math.cos( 4.73732 +       3.93215 * T);
            Lon[0] +=     0.00011 * Math.cos( 5.82682 +     224.34480 * T);
            Lon[0] +=     0.00011 * Math.cos( 0.48865 +     138.51750 * T);
            Lon[0] +=     0.00010 * Math.cos( 2.95517 +      35.16409 * T);
            Lon[1]  =    75.02543 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[1] +=     0.00154 * Math.cos( 5.24202 +      74.78160 * T);
            Lon[1] +=     0.00024 * Math.cos( 1.71256 +       1.48447 * T);
            Lon[2]  =     0.00053 * Math.cos( 0.00000 +       0.00000 * T);
        // Uranus's Latitude
            Lat[0]  =     0.01346 * Math.cos( 2.61878 +      74.78160 * T);
            Lat[0] +=     0.00062 * Math.cos( 5.08111 +     149.56320 * T);
            Lat[0] +=     0.00062 * Math.cos( 3.14159 +       0.00000 * T);
            Lat[0] +=     0.00010 * Math.cos( 1.61604 +      76.26607 * T);
            Lat[0] +=     0.00010 * Math.cos( 0.57630 +      73.29713 * T);
            Lat[1]  =     0.00206 * Math.cos( 4.12394 +      74.78160 * T);
        // Uranus's Radius Vector
            Rad[0]  =    19.21265 * Math.cos( 0.00000 +       0.00000 * T);
            Rad[0] +=     0.88785 * Math.cos( 5.60378 +      74.78160 * T);
            Rad[0] +=     0.03441 * Math.cos( 0.32836 +      73.29713 * T);
            Rad[0] +=     0.02056 * Math.cos( 1.78295 +     149.56320 * T);
            Rad[0] +=     0.00649 * Math.cos( 4.52247 +      76.26607 * T);
            Rad[0] +=     0.00602 * Math.cos( 3.86004 +      63.73590 * T);
            Rad[0] +=     0.00496 * Math.cos( 1.40140 +     454.90937 * T);
            Rad[0] +=     0.00339 * Math.cos( 1.58003 +     138.51750 * T);
            Rad[0] +=     0.00244 * Math.cos( 1.57087 +      71.81265 * T);
            Rad[0] +=     0.00191 * Math.cos( 1.99809 +       1.48447 * T);
            Rad[0] +=     0.00162 * Math.cos( 2.79138 +     148.07872 * T);
            Rad[0] +=     0.00144 * Math.cos( 1.38369 +      11.04570 * T);
            Rad[0] +=     0.00093 * Math.cos( 0.17437 +      36.64856 * T);
            Rad[0] +=     0.00071 * Math.cos( 4.24509 +     224.34480 * T);
            Rad[0] +=     0.00090 * Math.cos( 3.66105 +     109.94569 * T);
            Rad[0] +=     0.00039 * Math.cos( 1.66971 +      70.84945 * T);
            Rad[0] +=     0.00047 * Math.cos( 1.39977 +      35.16409 * T);
            Rad[0] +=     0.00039 * Math.cos( 3.36235 +     277.03499 * T);
            Rad[0] +=     0.00037 * Math.cos( 3.88649 +     146.59425 * T);
            Rad[0] +=     0.00030 * Math.cos( 0.70100 +     151.04767 * T);
            Rad[0] +=     0.00029 * Math.cos( 3.18056 +      77.75054 * T);
            Rad[0] +=     0.00020 * Math.cos( 1.55589 +     202.25340 * T);
            Rad[0] +=     0.00026 * Math.cos( 5.25656 +     380.12777 * T);
            Rad[0] +=     0.00026 * Math.cos( 3.78538 +      85.82730 * T);
            Rad[0] +=     0.00023 * Math.cos( 0.72519 +     529.69097 * T);
            Rad[0] +=     0.00020 * Math.cos( 2.79640 +      70.32818 * T);
            Rad[0] +=     0.00018 * Math.cos( 0.55455 +       2.96895 * T);
            Rad[0] +=     0.00012 * Math.cos( 5.96039 +     127.47180 * T);
            Rad[0] +=     0.00015 * Math.cos( 4.90434 +     108.46122 * T);
            Rad[0] +=     0.00011 * Math.cos( 0.43774 +      65.22037 * T);
            Rad[0] +=     0.00016 * Math.cos( 5.35405 +      38.13304 * T);
            Rad[0] +=     0.00011 * Math.cos( 1.42105 +     213.29910 * T);
            Rad[0] +=     0.00012 * Math.cos( 3.29826 +       3.93215 * T);
            Rad[0] +=     0.00012 * Math.cos( 1.75044 +     984.60033 * T);
            Rad[0] +=     0.00013 * Math.cos( 2.62154 +     111.43016 * T);
            Rad[0] +=     0.00012 * Math.cos( 0.99343 +      52.69020 * T);
            Rad[1]  =     0.01480 * Math.cos( 3.67206 +      74.78160 * T);
            Rad[1] +=     0.00071 * Math.cos( 6.22601 +      63.73590 * T);
            Rad[1] +=     0.00069 * Math.cos( 6.13411 +     149.56320 * T);
            Rad[1] +=     0.00021 * Math.cos( 5.24625 +      11.04570 * T);
            Rad[1] +=     0.00021 * Math.cos( 2.60177 +      76.26607 * T);
            Rad[1] +=     0.00024 * Math.cos( 3.14159 +       0.00000 * T);
            Rad[1] +=     0.00011 * Math.cos( 0.01848 +      70.84945 * T);
            Rad[2]  =     0.00022 * Math.cos( 0.69953 +      74.78160 * T);

            lo = mod360( calVsopTerm( T, Lon ) / deg2rad);
            bo = calVsopTerm( T, Lat ) / deg2rad;
            ro = calVsopTerm( T, Rad );

            var res = new Array( lo, bo, ro );
            return res;
        }

        function calPositNE( T ){
            var lo = 0.0;
            var bo = 0.0;
            var ro = 0.0;
            var Lon = new Array();
            var Lat = new Array();
            var Rad = new Array();

        // Neptune's Longitude
            Lon[0]  =     5.31189 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[0] +=     0.01798 * Math.cos( 2.90101 +      38.13304 * T);
            Lon[0] +=     0.01020 * Math.cos( 0.48581 +       1.48447 * T);
            Lon[0] +=     0.00125 * Math.cos( 4.83008 +      36.64856 * T);
            Lon[0] +=     0.00042 * Math.cos( 5.41055 +       2.96895 * T);
            Lon[0] +=     0.00038 * Math.cos( 6.09222 +      35.16409 * T);
            Lon[0] +=     0.00034 * Math.cos( 1.24489 +      76.26607 * T);
            Lon[0] +=     0.00016 * Math.cos( 0.00008 +     491.55793 * T);
            Lon[1]  =    38.37688 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[1] +=     0.00017 * Math.cos( 4.86319 +       1.48447 * T);
            Lon[1] +=     0.00016 * Math.cos( 2.27923 +      38.13304 * T);
            Lon[2]  =     0.00054 * Math.cos( 0.00000 +       0.00000 * T);
        // Neptune's Latitude
            Lat[0]  =     0.03089 * Math.cos( 1.44104 +      38.13304 * T);
            Lat[0] +=     0.00028 * Math.cos( 5.91272 +      76.26607 * T);
            Lat[0] +=     0.00028 * Math.cos( 0.00000 +       0.00000 * T);
            Lat[0] +=     0.00015 * Math.cos( 2.52124 +      36.64856 * T);
            Lat[0] +=     0.00015 * Math.cos( 3.50877 +      39.61751 * T);
            Lat[1]  =     0.00227 * Math.cos( 3.80793 +      38.13304 * T);
            Lat[2]  =     0.00010 * Math.cos( 5.57124 +      38.13304 * T);
        // Neptune's Radius Vector
            Rad[0]  =    30.07013 * Math.cos( 0.00000 +       0.00000 * T);
            Rad[0] +=     0.27062 * Math.cos( 1.32999 +      38.13304 * T);
            Rad[0] +=     0.01692 * Math.cos( 3.25186 +      36.64856 * T);
            Rad[0] +=     0.00808 * Math.cos( 5.18593 +       1.48447 * T);
            Rad[0] +=     0.00538 * Math.cos( 4.52114 +      35.16409 * T);
            Rad[0] +=     0.00496 * Math.cos( 1.57106 +     491.55793 * T);
            Rad[0] +=     0.00275 * Math.cos( 1.84552 +     175.16606 * T);
            Rad[0] +=     0.00135 * Math.cos( 3.37221 +      39.61751 * T);
            Rad[0] +=     0.00122 * Math.cos( 5.79754 +      76.26607 * T);
            Rad[0] +=     0.00101 * Math.cos( 0.37703 +      73.29713 * T);
            Rad[0] +=     0.00070 * Math.cos( 3.79617 +       2.96895 * T);
            Rad[0] +=     0.00047 * Math.cos( 5.74938 +      33.67962 * T);
            Rad[0] +=     0.00025 * Math.cos( 0.50802 +     109.94569 * T);
            Rad[0] +=     0.00017 * Math.cos( 1.59422 +      71.81265 * T);
            Rad[0] +=     0.00014 * Math.cos( 1.07786 +      74.78160 * T);
            Rad[0] +=     0.00012 * Math.cos( 1.92062 +    1021.24889 * T);
            Rad[1]  =     0.00236 * Math.cos( 0.70498 +      38.13304 * T);
            Rad[1] +=     0.00013 * Math.cos( 3.32015 +       1.48447 * T);

            lo = mod360( calVsopTerm( T, Lon ) / deg2rad);
            bo = calVsopTerm( T, Lat ) / deg2rad;
            ro = calVsopTerm( T, Rad );

            var res = new Array( lo, bo, ro );
            return res;
        }
        function calPositPL_mee( T ){
            var lo = 238.9581 + 144.96 * T;
            var bo =  -3.9082;
            var ro =  40.7241;

            var Ju = mod360( 34.35 + 3034.9057 * T);
            var Sa = mod360( 50.58 + 1222.1138 * T);
            var Pl = mod360(238.96 +  144.9600 * T);

        // Pluto's Longitude
            lo += -19.7998 * sin4deg(Pl * 1.0) + 19.8501 * cos4deg(Pl * 1.0);
            lo +=   0.8971 * sin4deg(Pl * 2.0) -  4.9548 * cos4deg(Pl * 2.0);
            lo +=   0.6111 * sin4deg(Pl * 3.0) +  1.2110 * cos4deg(Pl * 3.0);
            lo +=  -0.3412 * sin4deg(Pl * 4.0) -  0.1896 * cos4deg(Pl * 4.0);
            lo +=   0.1293 * sin4deg(Pl * 5.0) -  0.0350 * cos4deg(Pl * 5.0);
            lo +=  -0.0382 * sin4deg(Pl * 6.0) +  0.0309 * cos4deg(Pl * 6.0);
            lo +=   0.0204 * sin4deg(Sa -  Pl) -  0.0100 * cos4deg(Sa -  Pl);
            lo +=  -0.0041 * sin4deg(Sa * 1.0) -  0.0051 * cos4deg(Sa * 1.0);
            lo +=  -0.0060 * sin4deg(Sa +  Pl) -  0.0033 * cos4deg(Sa +  Pl);

        // Pluto's Latitude
            bo +=  -5.4529 * sin4deg(Pl * 1.0) - 14.9749 * cos4deg(Pl * 1.0);
            bo +=   3.5278 * sin4deg(Pl * 2.0) +  1.6728 * cos4deg(Pl * 2.0);
            bo +=  -1.0507 * sin4deg(Pl * 3.0) +  0.3276 * cos4deg(Pl * 3.0);
            bo +=   0.1787 * sin4deg(Pl * 4.0) -  0.2922 * cos4deg(Pl * 4.0);
            bo +=   0.0187 * sin4deg(Pl * 5.0) +  0.1003 * cos4deg(Pl * 5.0);
            bo +=  -0.0307 * sin4deg(Pl * 6.0) -  0.0258 * cos4deg(Pl * 6.0);
            bo +=   0.0049 * sin4deg(Sa -  Pl) +  0.0112 * cos4deg(Sa -  Pl);
            bo +=   0.0020 * sin4deg(Sa +  Pl) -  0.0008 * cos4deg(Sa +  Pl);

        // Pluto's Radius Vector
            ro +=   6.6865 * sin4deg(Pl * 1.0) +  6.8952 * cos4deg(Pl * 1.0);
            ro +=  -1.1828 * sin4deg(Pl * 2.0) -  0.0332 * cos4deg(Pl * 2.0);
            ro +=   0.1593 * sin4deg(Pl * 3.0) -  0.1439 * cos4deg(Pl * 3.0);
            ro +=  -0.0018 * sin4deg(Pl * 4.0) +  0.0483 * cos4deg(Pl * 4.0);
            ro +=  -0.0065 * sin4deg(Pl * 5.0) -  0.0085 * cos4deg(Pl * 5.0);
            ro +=   0.0031 * sin4deg(Pl * 6.0) -  0.0006 * cos4deg(Pl * 6.0);
            ro +=  -0.0006 * sin4deg(Sa -  Pl) -  0.0022 * cos4deg(Sa -  Pl);
            ro +=   0.0005 * sin4deg(Sa * 1.0) -  0.0004 * cos4deg(Sa * 1.0);
            ro +=  -0.0002 * sin4deg(Sa +  Pl);

            var res = new Array( lo, bo, ro );
            return res;
        }

        // Taken from ftp://cyrano-se.obspm.fr/pub/3_solar_system/3_pluto/notice.txt
        function calPositPL_obspm( T ) {
            var T2 = T  * T;
            var T3 = T2 * T;

            var a = 39.5404;
            a += +0.004471   * T;
            a += +0.0315           * Math.sin(  2.545150 * T + 1.8271 );
            a += +0.0490           * Math.sin( 18.787117 * T + 4.4687 );
            a += +0.0536           * Math.sin( 47.883664 * T + 3.8553 );
            a += +0.2141           * Math.sin( 50.426476 * T + 4.1802 );
            a += +0.0004           * Math.sin( 47.883664 * T + 4.1379 );
            a += +0.0066           * Math.sin( 50.426476 * T + 5.1987 );
            a += +0.0091           * Math.sin( 47.883664 * T + 5.6881 );
            a += +0.0200           * Math.sin( 50.426476 * T + 6.0165 );
            a += +0.000018   * T   * Math.sin( 47.883664 * T + 4.1379 );
            a += +0.000330   * T   * Math.sin( 50.426476 * T + 5.1987 );
            a += +0.000905   * T   * Math.sin( 47.883664 * T + 5.6881 );
            a += +0.001990   * T   * Math.sin( 50.426476 * T + 6.0165 );
            a += +0.00002256 * T2  * Math.sin( 47.883664 * T + 5.6881 );
            a += +0.00004958 * T2  * Math.sin( 50.426476 * T + 6.0165 );

            var l =  4.1702;
            l += +2.533953     * T;
            l += -0.00021295   * T2;
            l += +0.0000001231 * T3;
            l += +0.0014            * Math.sin(  0.199159 * T + 5.8539 );
            l += +0.0050            * Math.sin(  0.364944 * T + 1.2137 );
            l += +0.0055            * Math.sin(  0.397753 * T + 4.9469 );
            l += +0.0002            * Math.sin(  2.543029 * T + 3.0186 );
            l += +0.0012            * Math.sin( 18.787098 * T + 3.4938 );
            l += +0.0008            * Math.sin( 18.817229 * T + 2.0097 );
            l += +0.0050            * Math.sin( 50.426472 * T + 2.6252 );
            l += +0.0015            * Math.sin( 52.969319 * T + 6.1048 );
            l += +0.0008            * Math.sin(292.208471 * T + 4.7603 );
            l += +0.0008            * Math.sin(292.265343 * T + 2.8055 );
            l += +0.0031            * Math.sin(  0.364944 * T + 2.7888 );
            l += +0.0004            * Math.sin(  2.543029 * T + 0.5111 );
            l += +0.0003            * Math.sin( 18.787098 * T + 6.1336 );
            l += +0.0000            * Math.sin( 50.426472 * T + 2.2515 );
            l += +0.0004            * Math.sin(292.208471 * T + 0.0813 );
            l += +0.0004            * Math.sin(292.265343 * T + 1.2477 );
            l += +0.0004            * Math.sin( 50.426472 * T + 4.2694 );
            l += +0.000156   * T    * Math.sin(  0.364944 * T + 2.7888 );
            l += +0.000020   * T    * Math.sin(  2.543029 * T + 0.5111 );
            l += +0.000017   * T    * Math.sin( 18.787098 * T + 6.1336 );
            l += +0.000000   * T    * Math.sin( 50.426472 * T + 2.2515 );
            l += +0.000022   * T    * Math.sin(292.208471 * T + 0.0813 );
            l += +0.000022   * T    * Math.sin(292.265343 * T + 1.2477 );
            l += +0.000044   * T    * Math.sin( 50.426472 * T + 4.2694 );
            l += +0.00000110 * T2   * Math.sin( 50.426472 * T + 4.2694 );
            l /= deg2rad;

            var h = -0.1733;
            h += -0.000013   * T;
            h += +0.0012            * Math.sin(  2.541849 * T + 3.9572 );
            h += +0.0008            * Math.sin( 21.329808 * T + 0.8858 );
            h += +0.0012            * Math.sin( 47.883781 * T + 1.4929 );
            h += +0.0005            * Math.sin( 50.426641 * T + 5.3286 );
            h += +0.0037            * Math.sin( 52.969135 * T + 0.6139 );

            var k = -0.1787;
            k += -0.000070   * T;
            k += +0.0006            * Math.sin(  2.512561 * T + 3.8516 );
            k += +0.0013            * Math.sin(  2.543100 * T + 0.0218 );
            k += +0.0008            * Math.sin( 21.329765 * T + 2.4324 );
            k += +0.0012            * Math.sin( 47.883788 * T + 6.2432 );
            k += +0.0005            * Math.sin( 50.426611 * T + 3.0920 );
            k += +0.0038            * Math.sin( 52.969155 * T + 2.1566 );
            k += +0.0004            * Math.sin(  2.512561 * T + 5.3919 );
            k += +0.000022   * T    * Math.sin(  2.512561 * T + 5.3919 );

            var p = +0.1398;
            p += +0.000007   * T;
            p += +0.0002            * Math.sin( 50.426871 * T + 0.6705 );
            p += +0.0002            * Math.sin( 55.512211 * T + 6.0770 );

            var q = -0.0517;
            q += +0.000020   * T;
            q += +0.0002            * Math.sin( 50.426859 * T + 5.4131 );
            q += +0.0002            * Math.sin( 55.512206 * T + 1.3314 );

            // my( $L, $opi, $omg, $i, $e, $a ) = convertOrbitalElement( $a, $l, $h, $k, $p, $q );
            var orbitalElements = convertOrbitalElement( a, l, h, k, p, q );
            return orbitWork( ...orbitalElements );
        }
        function calSolarVelocity( JD ){
            var T = ( JD - 2451545.0 ) / 365250.0;
            var vel  = 3548.330;
                vel +=  118.568 * sin4deg( 87.5287 + 359993.7286 * T );
            return vel / 3600.0;
        }
        function calLunarVelocity( JD ){
            var T = ( JD - 2451545.0 ) / 36525.0;
            var mf = new Array();
            var vel;

        // D : Mean elongation of the Moon
            mf[0]  = 445267.0 * T;
            mf[0]  = mod360( mf[0] );
            mf[0] +=   0.11151 * T;
            mf[0] -=   0.00163 * T * T;
            mf[0] += 297.85020;
            mf[0]  = mod360( mf[0] );

        // l' : Mean anomary of the Sun
            mf[1]  =  35999.0 * T;
            mf[1]  = mod360( mf[1] );
            mf[1] +=   0.05029 * T;
            mf[1] -=   0.00015 * T * T;
            mf[1] += 357.51687;
            mf[1]  = mod360( mf[1] );

        // l : Mean anomary of the Moon
            mf[2]  = 477198.0 * T;
            mf[2]  = mod360( mf[2] );
            mf[2] +=   0.86763  * T;
            mf[2] +=   0.008997 * T * T;
            mf[2] += 134.96341;
            mf[2]  = mod360( mf[2] );

        // F : Argument of latitude of the Moon
            mf[3]  = 483202.0 * T;
            mf[3]  = mod360( mf[3] );
            mf[3] +=   0.01753 * T;
            mf[3] -=   0.00340 * T * T;
            mf[3] +=  93.27210;
            mf[3]  = mod360( mf[3] );

            vel  = 13.176397;
            vel +=  1.434006 * cos4deg(mf[2]);
            vel +=  0.280135 * cos4deg(2.0 * mf[0]);
            vel +=  0.251632 * cos4deg(2.0 * mf[0] - mf[2]);
            vel +=  0.097420 * cos4deg(2.0 * mf[2]);
            vel -=  0.052799 * cos4deg(2.0 * mf[3]);
            vel +=  0.034848 * cos4deg(2.0 * mf[0] + mf[2]);
            vel +=  0.018732 * cos4deg(2.0 * mf[0] - mf[1]);
            vel +=  0.010316 * cos4deg(2.0 * mf[0] - mf[1] - mf[2]);
            vel +=  0.008649 * cos4deg(mf[1] - mf[2]);
            vel -=  0.008642 * cos4deg(2.0 * mf[3] + mf[2]);
            vel -=  0.007471 * cos4deg(mf[1] + mf[2]);
            vel -=  0.007387 * cos4deg(mf[0]);
            vel +=  0.006864 * cos4deg(3.0 * mf[2]);
            vel +=  0.006650 * cos4deg(4.0 * mf[0] - mf[2]);

            return vel;
        }

        // This function from "Numerical expressions for precession formulae
        // and mean elements for the Moon and the planets" J. L. Simon, et al.,
        // Astron. Astrophys., 282, 663-683(1994).
        function calPositLuna( JD ){
            var d = JD - 2451545.0;
            var T =  d / 36525.0;
            var D, F, l, l1, omg, opi, DH, LT ;

            omg = mod360(125.0445550 -  0.0529537628 * d + 0.0020761667 * T * T);
            opi = mod360( 83.3532430 +  0.1114308160 * d - 0.0103237778 * T * T);

            D   = mod360(297.8502042 + 12.19074912 * d - 0.0016299722 * T * T);
            F   = mod360( 93.2720993 + 13.22935024 * d - 0.0034029167 * T * T);
            l   = mod360(134.9634114 + 13.06499295 * d + 0.0089970278 * T * T);
            l1  = mod360(357.5291092 +  0.98560028 * d - 0.0001536667 * T * T);

            DH  = omg;
            DH -= 1.4978 * sin4deg(2.0 * (D - F));
            DH -= 0.1500 * sin4deg(l1);
            DH -= 0.1225 * sin4deg(2.0 * D);
            DH += 0.1175 * sin4deg(2.0 * F);
            DH -= 0.0800 * sin4deg(2.0 * (l - F));
            DH  = mod360(DH);

            LT  = opi + 180.0;
            LT -= 15.4469 * sin4deg(2.0 * D - l);
            LT -=  9.6419 * sin4deg(2.0 * (D - l));
            LT -=  2.7200 * sin4deg(l);
            LT +=  2.6069 * sin4deg(4.0 * D - 3.0 * l);
            LT +=  2.0847 * sin4deg(4.0 * D - 2.0 * l);
            LT +=  1.4772 * sin4deg(2.0 * D + l);
            LT +=  0.9678 * sin4deg(4.0 * (D - l));
            LT -=  0.9412 * sin4deg(2.0 * D - l1 - l);
            LT -=  0.7028 * sin4deg(6.0 * D - 4.0 * l);
            LT -=  0.6600 * sin4deg(2.0 * D);
            LT -=  0.5764 * sin4deg(2.0 * D - 3.0 * l);
            LT -=  0.5231 * sin4deg(2.0 * l);
            LT -=  0.4822 * sin4deg(6.0 * D - 5.0 * l);
            LT +=  0.4517 * sin4deg(l1);
            LT -=  0.3806 * sin4deg(6.0 * D - 3.0 * l);

            var luna = new Array( DH, LT );
            return luna;
        }
        function calGeoPoint( lst, la, obl ){
            var MCx = sin4deg(lst);
            var MCy = cos4deg(lst) * cos4deg(obl);
            var MC  = mod360( Math.atan2( MCx, MCy ) / deg2rad );
            if( MC < 0.0 ){
                MC += 360.0;
            }

            var ASCx  = cos4deg(lst);
            var ASCy  = -(sin4deg(obl) * tan4deg(la));
                ASCy -= cos4deg(obl) * sin4deg(lst);
            var ASC   = mod360( Math.atan2( ASCx, ASCy ) / deg2rad );
            if( ASC < 0.0 ){
                ASC += 360.0;
            }

            var res = new Array( ASC, MC );
            return res;
        }
        function calVsopTerm( T, term ){
            var res = 0.0;

            for( var i = term.length - 1; i >= 0; i-- ){
                res = term[ i ] + res * T;
            }

            return res;
        }
        function calPositSO( T ){
            var lo = 0.0;
            var bo = 0.0;
            var ro = 0.0;
            var Lon = new Array();
            var Lat = new Array();
            var Rad = new Array();

        // Earth(Sun)'s Longitude
            Lon[0]  =     1.75347 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[0] +=     0.03342 * Math.cos( 4.66926 +    6283.07585 * T);
            Lon[0] +=     0.00035 * Math.cos( 4.62610 +   12566.15170 * T);
            Lon[1]  =  6283.31967 * Math.cos( 0.00000 +       0.00000 * T);
            Lon[1] +=     0.00206 * Math.cos( 2.67823 +    6283.07585 * T);
            Lon[2]  =     0.00053 * Math.cos( 0.00000 +       0.00000 * T);

        // Earth(Sun)'s Radius Vector
            Rad[0]  =     1.00014 * Math.cos( 0.00000 +       0.00000 * T);
            Rad[0] +=     0.01671 * Math.cos( 3.09846 +    6283.07585 * T);
            Rad[0] +=     0.00014 * Math.cos( 3.05525 +   12566.15170 * T);
            Rad[1]  =     0.00103 * Math.cos( 1.10749 +    6283.07585 * T);

            lo = mod360( calVsopTerm( T, Lon ) / deg2rad);
            ro = calVsopTerm( T, Rad );

            lo = mod360( lo + 180.0 );

            var res = new Array( lo, bo, ro );
            return res;
        }
        function cnvCalendar( JD ){
            JD += 0.5;
            var Z = Math.floor( JD );
            var F = JD - Z;

            var A = 0;
            if(Z >= 2299161){
                var alpha = Math.floor((Z - 1867216.25) / 36524.25);
                A = Z + 1 + alpha - Math.floor(alpha / 4);
            } else {
                A = Z;
            }

            var B = A + 1524;
            var C = Math.floor((B - 122.1) / 365.25);
            var D = Math.floor(365.25 * C);
            var E = Math.floor((B - D) / 30.6001);

            var da = B - D - Math.floor(30.6001 * E);
            var mo = (E < 13.5) ? (E - 1) : (E - 13);
            var ye = (mo > 2.5) ? (C - 4716) : (C - 4715);

            var ti = F * 24.0;
            var ho = Math.floor(ti);
            var mi = (ti - ho) * 60.0;

            var res = new Array(ye, mo, da, ho, mi);
            return res;
        }
        function calJD(ye, mo, da, ho, mi){ // �����̏�
            var y0 = (mo > 2) ? ye : (ye -  1);
            var m0 = (mo > 2) ? mo : (mo + 12);
            var JD = Math.floor(365.25 * y0) + Math.floor(y0 / 400) - Math.floor(y0 / 100);
            JD	+= Math.floor(30.59 * (m0 - 2)) + da;
            JD	+= ((ho - 9) * 60.0 + mi) / 1440.0 + 1721088.5;

            return JD;
        }
        function cnvJDr( JD ){
            var date = cnvCalendar(JD);
            var ye = date[ 0 ];
            var mo = date[ 1 ];
            var da = date[ 2 ];
            var JDz = calJDz(ye, mo, da);

            return JDz;
        }
        function calJDz(year, month, day){ // ������
            var yt = year;
            var mt = month;
            var dt = day;

            if(month < 3){
                yt--;
                mt += 12;
            }

            var JD = Math.floor(365.25 * yt) + Math.floor(30.6001 * (mt + 1));
            JD += dt + 1720995;
            JD += 2 - Math.floor(yt / 100) + Math.floor(yt / 400);

            return JD;
        }
        function calTimeCoefficient( JD ){
            var d = JD - 2451545.0;
            var T = d / 36525.0;
            var coef = new Array(d, T);

            return coef;
        }

        // a : semi-major axis (au).
        // l : mean longitude (degree).
        // h : e * sin(pi).
        // k : e * cos(pi).
        // p : g * sin(om).
        // q : g * cos(om).
        // e : eccentricity.
        // g : sine of the half inclination.
        // pi: longitude of the perihelion.
        // om: longitude of the ascending node.
        function convertOrbitalElement( a, l, h, k, p, q ) {
            var L = l;
            var e = Math.sqrt( h * h + k * k );
            var g = Math.sqrt( p * p + q * q );
            var i = Math.asin( g ) * 2.0 / deg2rad;
            var opi = Math.atan2( h, k ) / deg2rad;
            var omg = Math.atan2( p, q ) / deg2rad;

            var result = [L, opi, omg, i, e, a];
            return result;
        }
        function orbitWork(L, opi, omg, i, e, a){
            var M = mod360(L - opi);
            var E = mod360(solveKepler(M, e));

            var rE  = E * deg2rad;
            var thv = Math.sqrt( (1 + e) / (1 - e) ) * Math.tan(rE / 2.0);
            var v   = mod360(Math.atan2(thv, 1.0) * 2.0 / deg2rad);
            var r   = a * (1.0 - e * Math.cos(rE));
            var u   = L + v - M - omg;
            
            var ri = i * deg2rad;
            var ru = u * deg2rad;
            var l  = mod360(omg + Math.atan2(Math.cos(ri) * Math.sin(ru), Math.cos(ru)) / deg2rad);

            var rb = Math.asin(Math.sin(ru) * Math.sin(ri));
            var b  = rb / deg2rad;

            var res = new Array(l, b, r);
            return res;
        }
        function solveKepler(M, e){
            var Mr = M * deg2rad;
            var Er = Mr;

            for( var i = 0; i < 20; i++ ){
                Er = Mr + e * Math.sin( Er );
            }

            return Er / deg2rad;
        }

        function convertGeocentric( earthCoor, planetCoor ){
            var lp, bp, rp, ls, bs, rs;

            ls = earthCoor[ 0 ];
            bs = earthCoor[ 1 ];
            rs = earthCoor[ 2 ];

            lp = planetCoor[ 0 ];
            bp = planetCoor[ 1 ];
            rp = planetCoor[ 2 ];

            var xs = rs * Math.cos(ls * deg2rad) * Math.cos(bs * deg2rad);
            var ys = rs * Math.sin(ls * deg2rad) * Math.cos(bs * deg2rad);
            var zs = rs *                          Math.sin(bs * deg2rad);
            var xp = rp * Math.cos(lp * deg2rad) * Math.cos(bp * deg2rad);
            var yp = rp * Math.sin(lp * deg2rad) * Math.cos(bp * deg2rad);
            var zp = rp *                          Math.sin(bp * deg2rad);

            var xg = xp + xs;
            var yg = yp + ys;
            var zg = zp + zs;

            var rg = Math.sqrt(xg * xg + yg * yg + zg * zg);
            var lg = Math.atan2(yg, xg) / deg2rad;
            if(lg < 0.0) lg += 360.0;
            var bg = asin4deg(zg / rg);

            var res = new Array(lg, bg, rg);
            return res;
        }

        function convertEquatorial(lon, lat, obl){
            var xs = cos4deg(lon) * cos4deg(lat);
            var ys = sin4deg(lon) * cos4deg(lat);
            var zs =                sin4deg(lat);

            var xd = xs;
            var yd = ys * cos4deg(obl) - zs * sin4deg(obl);
            var zd = ys * sin4deg(obl) + zs * cos4deg(obl);

            var RA = atan2(yd, xd) / deg2rad;
            if(RA < 0.0) RA += 360.0;
            var Dec = asin4deg(zd);

            var res = new Array(RA, Dec);
            return res;
        }

        function coordinateConvertFromJ2000( arg ){
            var zeta, zz, theta;
            var x, y, z, xd, yd, zd, xs, ys, zs;

            var xs  = arg[ 0 ];
            var ys  = arg[ 1 ];
            var zs  = arg[ 2 ];
            var tjd = arg[ 3 ];

            var T = (tjd - 2451545.0) / 36525.0;

            var zeta  = ((( 0.017998 * T + 0.30188) * T + 2306.2181) * T) / 3600.0;
            var zz    = ((( 0.018203 * T + 1.09468) * T + 2306.2181) * T) / 3600.0;
            var theta = (((-0.041833 * T - 0.42665) * T + 2004.3109) * T) / 3600.0;

        // Step 1
            x =  sin4deg(zeta) * xs + cos4deg(zeta) * ys;
            y = -cos4deg(zeta) * xs + sin4deg(zeta) * ys;
            z = zs;

        // Step 2;
        // 	x = x;
            y = 0 * x + cos4deg(theta) * y + sin4deg(theta) * z;
            z = 0 * x - sin4deg(theta) * y + cos4deg(theta) * z;

        // Step 3
            xd = -sin4deg(zz) * x - cos4deg(zz) * y;
            yd =  cos4deg(zz) * x - sin4deg(zz) * y;
            zd = z;

            var res = new Array(xd, yd, zd);
            return res;
        }

        function calLST(JD, ho, mi, lo){
            var JD0 = Math.floor(JD - 0.5) + 0.5;
            var T = (JD0 - 2451545.0) / 36525.0;
            var UT = (JD - JD0) * 360.0 * 1.002737909350795;
            if( UT < 0 ) UT += 360.0;

            var GST  = 0.279057273 + 100.0021390378 * T + 1.077591667e-06 * T * T;
                GST  = GST - Math.floor(GST);
                GST *= 360.0;

            var LST = mod360(GST + UT + lo);
            var dpsi = calNutation(JD);
            var eps  = calOblique(JD);
            LST += dpsi * cos4deg(eps) / 3600.0;
            if(LST < 0.0) LST += 360.0;

            return LST;
        }
        function calOblique(JD ){
            var T = (JD - 2451545.0) / 36525.0;
            var Omg = mod360(125.00452 - T *   1934.136261);
            var Ls  = mod360(280.4665  + T *  36000.7698);
            var Lm  = mod360(218.3165  + T * 481267.8813);

            var e = 84381.448 + T * (-46.8150 + T * (-0.00059 + T * 0.001813));
            var deps  =  9.20 * cos4deg(1.0 * Omg);
                deps +=  0.57 * cos4deg(2.0 * Ls);
                deps +=  0.10 * cos4deg(2.0 * Lm);
                deps += -0.09 * cos4deg(2.0 * Omg);

            return (e + deps) / 3600.0;
        }
        deg2rad = Math.PI / 180.0;

        function sin4deg( X ){
            return Math.sin( X * deg2rad );
        }

        function cos4deg( X ){
            return Math.cos( X * deg2rad );
        }

        function tan4deg( X ){
            return Math.tan( X * deg2rad );
        }

        function asin4deg( X ){
            return Math.asin( X ) / deg2rad;
        }

        function acos4deg( X ){
            return Math.acos( X ) / deg2rad;
        }

        function atan4deg( X ){
            return Math.atan( X ) / deg2rad;
        }

        function atan24deg( X, Y ){
            return Math.atan2( X, Y ) / deg2rad;
        }

        function sgn( X ){
            return Math.sign( X );
        }

        function fmod( X, t ){
            var res = 0.0;
            res = X - Math.floor( X / t ) * t;
            if( res < 0.0 ){
                res += t;
            }
            return res;
        }        
        function mod360( X ){
            return X - Math.floor( X / 360.0 ) * 360.0;
        }
        function calNutation( JD ){
            var T = (JD - 2451545.0) / 36525.0;

            var Omg = mod360(125.00452 - T *   1934.136261);
            var Ls  = mod360(280.4665  + T *  36000.7698);
            var Lm  = mod360(218.3165  + T * 481267.8813);

            var dpsi  = -17.20 * sin4deg(1.0 * Omg);
                dpsi +=  -1.32 * sin4deg(2.0 * Ls);
                dpsi +=  -0.23 * sin4deg(2.0 * Lm);
                dpsi +=   0.21 * sin4deg(2.0 * Omg);

            return dpsi;
        }
        function calEqT( JD ){
            var  T = ( JD - 2451545.0 ) / 36525.0;

            var L0  = mod360( 36000.76983 * T );
                L0  = mod360( 280.46646 + L0 + 0.0003032 * T * T );
                L0 *= deg2rad;

            var  M  = mod360( 35999.05029 * T );
                M  = mod360( 357.52911 + M  - 0.0001537 * T * T );
                M *= deg2rad;

            var  e  = 0.016708634 + T * ( -0.000042037 - 0.0000001267 * T );

            var  y  = calOblique( JD );
                y  = tan4deg( y / 2.0 );
                y  = y * y;

            var  E  = y * Math.sin( 2 * L0 ) - 2.0 * e * Math.sin( M );
                E += 4.0 * e * y * Math.sin( M ) * Math.cos( 2.0 * L0 );
                E -= y * y * Math.sin( 4.0 * L0 ) / 2.0;
                E -= 5.0 * e * e * Math.sin( 2.0 * M ) / 4.0;

            E /= deg2rad;
            return ( E * 4.0 );
        }
        function calDayOfWeek(year, month, day){
            var JD = calJDz(year, month, day);
            var you = (JD + 1) % 7;
            return you;
        }

        function chkLeap( year ){
            var chk = 0;

            if(year %   4 == 0) chk = 1;
            if(year % 100 == 0) chk = 0;
            if(year % 400 == 0) chk = 1;

            return chk;
        }

        function maxday(year, month){
            var mday = [31, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            var md = mday[ month ];
            if( month == 2 && chkLeap( year ) ){
                md = 29;
            }

            return md;
        }

        // formula A : Notes Scientifiques et Techniques du Bureau des Longitudes, nr. S055
        // from ftp://cyrano-se.obspm.fr/pub/6_documents/4_lunar_tables/newexp.pdf
        // formula B : Polynomial Expressions for Delta T
        // from https://eclipse.gsfc.nasa.gov/SEhelp/deltatpoly2004.html
        // formula C : Delta T : Polynomial Approximation of Time Period 1620-2013
        // from https://www.hindawi.com/archive/2014/480964/ (license: CC-BY-3.0)
        function correctTDT(JD){
            var year = ( JD - 2451545.0 ) / 365.2425 + 2000.0;
            var t, dt;

            if( year < 948 ){ // formula A.26
                t = ( JD - 2451545.0 ) / 36525.0;
                dt = 2177.0 + t * ( 497.0 + t * 44.1 );
            } else if( year < 1600 ){ // formula A.25
                t = ( JD - 2451545.0 ) / 36525.0;
                dt =  102.0 + t * ( 102.0 + t * 25.3 );
            } else if( year < 1620 ){ // formula B
                t = year - 1600;
                dt = 120 + t * ( -0.9808 + t * ( -0.01532 + t / 7129 ) );
            } else if( year < 2014 ){ // formula C
                // last elements are sentinels.
                var tep = [     1620,     1673,     1730,      1798,      1844,     1878,      1905,      1946,      1990,  2014 ];
                var tk  = [    3.670,    3.120,    2.495,     1.925,     1.525,    1.220,     0.880,     0.455,     0.115, 0.000 ];
                var ta0 = [   76.541,   10.872,   13.480,    12.584,     6.364,   -5.058,    13.392,    30.782,    55.281, 0.000 ];
                var ta1 = [ -253.532,  -40.744,   13.075,     1.929,    11.004,   -1.701,   128.592,    34.348,    91.248, 0.000 ];
                var ta2 = [  695.901,  236.890,    8.635,    60.896,   407.776,  -46.403,  -279.165,    46.452,    87.202, 0.000 ];
                var ta3 = [-1256.982, -351.537,   -3.307, -1432.216, -4168.394, -866.171, -1282.050,  1295.550, -3092.565, 0.000 ];
                var ta4 = [  627.152,   36.612, -128.294,  3129.071,  7561.686, 5917.585,  4039.490, -3210.913,  8255.422, 0.000 ];

                var i = 0;
                for( var j = 0; j < tep.length; j++ ){
                    if( tep[ j ] <= year && year < tep[ j + 1 ] ){
                        i = j;
                        break;
                    }
                }
                var k  = tk[ i ];
                var a0 = ta0[ i ];
                var a1 = ta1[ i ];
                var a2 = ta2[ i ];
                var a3 = ta3[ i ];
                var a4 = ta4[ i ];

                var u = k + ( year - 2000 ) / 100;
                dt = a0 + u * ( a1 + u * ( a2 + u * ( a3 + u * a4 ) ) );
            } else { // formula A.25
                t = ( JD - 2451545.0 ) / 36525.0;
                dt =  102.0 + t * ( 102.0 + t * 25.3 );
                if( year < 2100 ){
                    dt += 0.37 * ( year - 2100 ); // from "Astronomical Algorithms" p.78
                }
            }

            dt /= 86400.0;
            return dt;
        }
        function advanceDate( date, step ){
            return encodeDate(cnvCalendar(calJDz(decodeDate(date)) + step));
        }
        function calDist(sy, sm, sd, ey, em, ed){
            return calJDz(ey, em, ed) - calJDz(sy, sm, sd);
        }
        function decodeDate( date ){
            var ye = Math.floor( date / 10000 );
            var mo = Math.floor((date % 10000) / 100);
            var da =             date %   100;

            var res = new Array(ye, mo, da);
            return res;
        }
        function decodeTime( time ){
            var ho = Math.floor(time / 100);
            var mi = fmod(time, 100);

            var res = new Array(ho, mi);
            return res;
        }
        function encodeDate(ye, mo, da){
            return ye * 10000 + mo * 100 + da;
        }
        function encodeTime(ho, mi){
            return ho * 100 + mi;
        }
        function convert_degrees_to_zodiac(degrees){
            function convert(deg) {
                if (deg < 29.59) { return '♈︎' }
                if (deg < 59.59) { return '♉︎' }
                if (deg < 89.59) { return '♊︎' }
                if (deg < 119.59) { return '♋︎' }
                if (deg < 149.59) { return '♌︎' }
                if (deg < 179.59) { return '♍︎' }
                if (deg < 209.59) { return '♎︎' }
                if (deg < 239.59) { return '♏︎' }
                if (deg < 269.59) { return '♐︎' }
                if (deg < 299.59) { return '♑︎' }
                if (deg < 329.59) { return '♒︎' }
                return '♓︎'
            }
            if (!Array.isArray(degrees)) { return convert(degrees) }

             let result = []
             for (let loop = 0; loop < degrees.length; loop++) {
                result.push(convert(degrees[loop]))
             }
             return result
        }
        function get_trigram(trigram) {
            let data = iChingData;
            let trigrams = data.trigrams
            for (let loop = 0; loop < trigrams.length; loop++) {
                if (trigram === trigrams[loop].symbol) { return trigrams[loop] }
            }
        }
        function get_trigram_from_zodiac(sign) {
            let data = iChingData;
            let trigrams = data.trigrams
            for (let loop = 0; loop < trigrams.length; loop++) {
                if (sign === trigrams[loop].zodiac) { return trigrams[loop] }
            }
        }
        function get_zodiac(sign) {
            let data = iChingData;
            let zodiac = data.zodiac
            for (let loop = 0; loop < zodiac.length; loop++) {
                if (sign === zodiac[loop].symbol) { return zodiac[loop] }
            }
        }
        function get_planets_string(planetSymbols) {
            let data = iChingData;
            let planets = data.planets
            let planetString = ""

            for (let planetSymbolLoop = 0; planetSymbolLoop < planetSymbols.length; planetSymbolLoop++) {
                let planetSymbol = planetSymbols[planetSymbolLoop]
                for (let planetsLoop = 0; planetsLoop < planets.length; planetsLoop++) {
                    if (planetSymbol !== planets[planetsLoop].symbol) { continue }
                    if (planetString.length > 0) {planetString += ", "}
                    planetString += planets[planetsLoop].symbol
                    planetString += " ("
                    planetString += planets[planetsLoop].name
                    planetString += ")"
                }
            }
            if (!planetString) { planetString = "None" }
            return planetString
        }
        function get_domicile_string(sign) {
            let zodiac = get_zodiac(sign)
            if (!zodiac) { return "" }
            return get_planets_string(zodiac.domicile)
        }
        function get_detriment_string(sign) {
            let zodiac = get_zodiac(sign)
            if (!zodiac) { return "" }
            return get_planets_string(zodiac.detriment)
        }
        function get_exalted_string(sign) {
            let zodiac = get_zodiac(sign)
            if (!zodiac) { return "" }
            return get_planets_string(zodiac.exalted)
        }
        function get_fall_string(sign) {
            let zodiac = get_zodiac(sign)
            if (!zodiac) { return "" }
            return get_planets_string(zodiac.fall)
        }
        function get_hexagram_from_trigrams(external, internal) {
            let data = iChingData;
            let hexagrams = data.symbols

            for (let hexagramLoop = 0; hexagramLoop < hexagrams.length; hexagramLoop++) {
                let hexagram = hexagrams[hexagramLoop]
                if (hexagram.trigram1 === external && hexagram.trigram2 === internal) { return hexagram }
            }
        }
        function get_random_hexagram() {
            let data = iChingData;
            let hexagrams = data.symbols
            let randomNumber = Math.floor(Math.random() * 144)
            return hexagrams[randomNumber]
        }
        function update_random_hexagram() {
            if (null === randomId) { 
                random_hexagram()
                randomId = setInterval(random_hexagram, 5000); 
            }
            function random_hexagram() {
                let randomHexagram = document.getElementById("RandomHexagram")
                let randomSymbolTitle = document.getElementById("RandomSymbolTitle")
                let randomSymbolTrigram1 = document.getElementById("RandomSymbolTrigram1")
                let randomSymbolTrigram2 = document.getElementById("RandomSymbolTrigram2")
                let randomSymbolZodiac1 = document.getElementById("RandomSymbolZodiac1")
                let randomSymbolZodiac2 = document.getElementById("RandomSymbolZodiac2")
                let randomExternalTrigram = document.getElementById("RandomExternalTrigram")
                let randomExternalZodiac = document.getElementById("RandomExternalZodiac")
                let randomExternalDomicile = document.getElementById("RandomExternalDomicile")
                let randomExternalDetriment = document.getElementById("RandomExternalDetriment")
                let randomExternalExalted = document.getElementById("RandomExternalExalted")
                let randomExternalFall = document.getElementById("RandomExternalFall")
                let randomInternalTrigram = document.getElementById("RandomInternalTrigram")
                let randomInternalZodiac = document.getElementById("RandomInternalZodiac")
                let randomInternalDomicile = document.getElementById("RandomInternalDomicile")
                let randomInternalDetriment = document.getElementById("RandomInternalDetriment")
                let randomInternalExalted = document.getElementById("RandomInternalExalted")
                let randomInternalFall = document.getElementById("RandomInternalFall")
                let randomCommentary = document.getElementById("RandomCommentary")
                let randomMeaning = document.getElementById("RandomMeaning")
                let hexagram = get_random_hexagram()
                let trigram1 = get_trigram(hexagram.trigram1)
                let trigram2 = get_trigram(hexagram.trigram2)
                let zodiac1 = get_zodiac(trigram1.zodiac)
                let zodiac2 = get_zodiac(trigram2.zodiac)

                randomSymbolTitle.innerText = hexagram.number + ". " + hexagram.name
                randomSymbolTrigram1.innerText = hexagram.trigram1
                randomSymbolTrigram2.innerText = hexagram.trigram2
                randomSymbolZodiac1.innerText = zodiac1.symbol
                randomSymbolZodiac2.innerText = zodiac2.symbol
                randomExternalTrigram.innerText = hexagram.trigram1 + ' ' + trigram1.name + ' (Earlier Heaven: ' + trigram1.earlier + ', Later Heaven: '  + trigram1.later + ')'
                randomExternalZodiac.innerText = zodiac1.symbol + ' ' + zodiac1.name + ' (' + zodiac1.energy + ')'
                randomExternalDomicile.innerText = get_domicile_string(zodiac1.symbol)
                randomExternalDetriment.innerText = get_detriment_string(zodiac1.symbol)
                randomExternalExalted.innerText = get_exalted_string(zodiac1.symbol)
                randomExternalFall.innerText = get_fall_string(zodiac1.symbol)
                randomInternalTrigram.innerText = hexagram.trigram2 + ' ' + trigram2.name + ' (Earlier Heaven: ' + trigram2.earlier + ', Later Heaven: '  + trigram2.later + ')'
                randomInternalZodiac.innerText = zodiac2.symbol + ' ' + zodiac2.name + ' (' + zodiac2.energy + ')'
                randomInternalDomicile.innerText = get_domicile_string(zodiac2.symbol)
                randomInternalDetriment.innerText = get_detriment_string(zodiac2.symbol)
                randomInternalExalted.innerText = get_exalted_string(zodiac2.symbol)
                randomInternalFall.innerText = get_fall_string(zodiac2.symbol)
                randomMeaning.innerText = hexagram.meaning
                randomCommentary.innerText = hexagram.commentary
            }
        }
        function select_lo_shu_hexagram(id) {
            let loShuHexagram = document.getElementById(currentLoShuHexagram)
            let currentRelated = get_lo_shu_related_elements(currentLoShuHexagram)
            let newLoShuHexagram = document.getElementById(id)
            let newRelated = get_lo_shu_related_elements(id)

            loShuHexagram.style.backgroundColor = "White"
            for (let loop = 0; loop < currentRelated.length; loop++) {
                let related = document.getElementById(currentRelated[loop])
                related.style.backgroundColor = "White"
            }
            for (let loop = 0; loop < newRelated.length; loop++) {
                let related = document.getElementById(newRelated[loop])
                related.style.backgroundColor = "#F0F0F0"
            }
            currentLoShuHexagram = id
            newLoShuHexagram.style.backgroundColor = "LightGrey"

            let hexagram = get_lo_shu_hexagram(currentLoShuHexagram)
            let symbolTitle = document.getElementById("LoShuSymbolTitle")
            let symbolTrigram1 = document.getElementById("LoShuSymbolTrigram1")
            let symbolTrigram2 = document.getElementById("LoShuSymbolTrigram2")
            let symbolZodiac1 = document.getElementById("LoShuSymbolZodiac1")
            let symbolZodiac2 = document.getElementById("LoShuSymbolZodiac2")
            let externalTrigram = document.getElementById("LoShuExternalTrigram")
            let externalZodiac = document.getElementById("LoShuExternalZodiac")
            let externalDomicile = document.getElementById("LoShuExternalDomicile")
            let externalDetriment = document.getElementById("LoShuExternalDetriment")
            let externalExalted = document.getElementById("LoShuExternalExalted")
            let externalFall = document.getElementById("LoShuExternalFall")
            let internalTrigram = document.getElementById("LoShuInternalTrigram")
            let internalZodiac = document.getElementById("LoShuInternalZodiac")
            let internalDomicile = document.getElementById("LoShuInternalDomicile")
            let internalDetriment = document.getElementById("LoShuInternalDetriment")
            let internalExalted = document.getElementById("LoShuInternalExalted")
            let internalFall = document.getElementById("LoShuInternalFall")
            let commentary = document.getElementById("LoShuCommentary")
            let meaning = document.getElementById("LoShuMeaning")
            let trigram1 = get_trigram(hexagram.trigram1)
            let trigram2 = get_trigram(hexagram.trigram2)
            let zodiac1 = get_zodiac(trigram1.zodiac)
            let zodiac2 = get_zodiac(trigram2.zodiac)

            symbolTitle.innerText = hexagram.number + '. ' + hexagram.name
            symbolTrigram1.innerText = hexagram.trigram1
            symbolTrigram2.innerText = hexagram.trigram2
            symbolZodiac1.innerText = zodiac1.symbol
            symbolZodiac2.innerText = zodiac2.symbol
            externalTrigram.innerText = hexagram.trigram1 + ' ' + trigram1.name + ' (Earlier Heaven: ' + trigram1.earlier + ', Later Heaven: '  + trigram1.later + ')'
            externalZodiac.innerText = zodiac1.symbol + ' ' + zodiac1.name + ' (' + zodiac1.energy + ')'
            externalDomicile.innerText = get_domicile_string(zodiac1.symbol)
            externalDetriment.innerText = get_detriment_string(zodiac1.symbol)
            externalExalted.innerText = get_exalted_string(zodiac1.symbol)
            externalFall.innerText = get_fall_string(zodiac1.symbol)
            internalTrigram.innerText = hexagram.trigram2 + ' ' + trigram2.name + ' (Earlier Heaven: ' + trigram2.earlier + ', Later Heaven: '  + trigram2.later + ')'
            internalZodiac.innerText = zodiac2.symbol + ' ' + zodiac2.name + ' (' + zodiac2.energy + ')'
            internalDomicile.innerText = get_domicile_string(zodiac2.symbol)
            internalDetriment.innerText = get_detriment_string(zodiac2.symbol)
            internalExalted.innerText = get_exalted_string(zodiac2.symbol)
            internalFall.innerText = get_fall_string(zodiac2.symbol)
            meaning.innerText = hexagram.meaning
            commentary.innerText = hexagram.commentary
        }
        function get_lo_shu_row_column(id) {
            if ("FirePastPastData" === id) { return { row: 0, column: 0 } }
            if ("FirePresentPastData" === id) { return { row: 0, column: 1 } }
            if ("FireFuturePastData" === id) { return { row: 0, column: 2 } }
            if ("FirePastPresentData" === id) { return { row: 1, column: 0 } }
            if ("FirePresentPresentData" === id) { return { row: 1, column: 1 } }
            if ("FireFuturePresentData" === id) { return { row: 1, column: 2 } }
            if ("FirePastFutureData" === id) { return { row: 2, column: 0 } }
            if ("FirePresentFutureData" === id) { return { row: 2, column: 1 } }
            if ("FireFutureFutureData" === id) { return { row: 2, column: 2 } }
            
            if ("WaterPastPastData" === id) { return { row: 3, column: 0 } }
            if ("WaterPresentPastData" === id) { return { row: 3, column: 1 } }
            if ("WaterFuturePastData" === id) { return { row: 3, column: 2 } }
            if ("WaterPastPresentData" === id) { return { row: 4, column: 0 } }
            if ("WaterPresentPresentData" === id) { return { row: 4, column: 1 } }
            if ("WaterFuturePresentData" === id) { return { row: 4, column: 2 } }
            if ("WaterPastFutureData" === id) { return { row: 5, column: 0 } }
            if ("WaterPresentFutureData" === id) { return { row: 5, column: 1 } }
            if ("WaterFutureFutureData" === id) { return { row: 5, column: 2 } }
            
            if ("AirPastPastData" === id) { return { row: 6, column: 0 } }
            if ("AirPresentPastData" === id) { return { row: 6, column: 1 } }
            if ("AirFuturePastData" === id) { return { row: 6, column: 2 } }
            if ("AirPastPresentData" === id) { return { row: 7, column: 0 } }
            if ("AirPresentPresentData" === id) { return { row: 7, column: 1 } }
            if ("AirFuturePresentData" === id) { return { row: 7, column: 2 } }
            if ("AirPastFutureData" === id) { return { row: 8, column: 0 } }
            if ("AirPresentFutureData" === id) { return { row: 8, column: 1 } }
            if ("AirFutureFutureData" === id) { return { row: 8, column: 2 } }
            
            if ("EarthPastPastData" === id) { return { row: 9, column: 0 } }
            if ("EarthPresentPastData" === id) { return { row: 9, column: 1 } }
            if ("EarthFuturePastData" === id) { return { row: 9, column: 2 } }
            if ("EarthPastPresentData" === id) { return { row: 10, column: 0 } }
            if ("EarthPresentPresentData" === id) { return { row: 10, column: 1 } }
            if ("EarthFuturePresentData" === id) { return { row: 10, column: 2 } }
            if ("EarthPastFutureData" === id) { return { row: 11, column: 0 } }
            if ("EarthPresentFutureData" === id) { return { row: 11, column: 1 } }
            if ("EarthFutureFutureData" === id) { return { row: 11, column: 2 } }            
        }
        function get_lo_shu_related_elements(id) {
            if ("FirePastPastData" === id) { return ["FirePresentPastData", "FireFuturePastData", "FirePastPresentData", "FirePastFutureData", "FirePresentPresentData", "FireFutureFutureData"] }
            if ("FirePresentPastData" === id) { return ["FirePastPastData", "FireFuturePastData", "FirePresentPresentData", "FirePresentFutureData"] }
            if ("FireFuturePastData" === id) { return ["FirePastPastData", "FirePresentPastData", "FireFuturePresentData", "FireFutureFutureData", "FirePresentPresentData", "FirePastFutureData"] }
            if ("FirePastPresentData" === id) { return ["FirePastPastData", "FirePastFutureData", "FirePresentPresentData", "FireFuturePresentData"] }
            if ("FirePresentPresentData" === id) { return ["FirePastPastData", "FirePresentPastData", "FireFuturePastData", "FirePastPresentData", "FireFuturePresentData", "FirePastFutureData", "FirePresentFutureData", "FireFutureFutureData"] }
            if ("FireFuturePresentData" === id) { return ["FireFuturePastData", "FireFutureFutureData", "FirePastPresentData", "FirePresentPresentData"] }
            if ("FirePastFutureData" === id) { return ["FirePastPastData", "FirePastPresentData", "FirePresentFutureData", "FireFutureFutureData", "FirePresentPresentData", "FireFuturePastData"] }
            if ("FirePresentFutureData" === id) { return ["FirePastFutureData", "FireFutureFutureData", "FirePresentPresentData", "FirePresentPastData"] }
            if ("FireFutureFutureData" === id) { return ["FireFuturePastData", "FireFuturePresentData", "FirePastFutureData", "FirePresentFutureData", "FirePresentPresentData", "FirePastPastData"] }

            if ("WaterPastPastData" === id) { return ["WaterPresentPastData", "WaterFuturePastData", "WaterPastPresentData", "WaterPastFutureData", "WaterPresentPresentData", "WaterFutureFutureData"] }
            if ("WaterPresentPastData" === id) { return ["WaterPastPastData", "WaterFuturePastData", "WaterPresentPresentData", "WaterPresentFutureData"] }
            if ("WaterFuturePastData" === id) { return ["WaterPastPastData", "WaterPresentPastData", "WaterFuturePresentData", "WaterFutureFutureData", "WaterPresentPresentData", "WaterPastFutureData"] }
            if ("WaterPastPresentData" === id) { return ["WaterPastPastData", "WaterPastFutureData", "WaterPresentPresentData", "WaterFuturePresentData"] }
            if ("WaterPresentPresentData" === id) { return ["WaterPastPastData", "WaterPresentPastData", "WaterFuturePastData", "WaterPastPresentData", "WaterFuturePresentData", "WaterPastFutureData", "WaterPresentFutureData", "WaterFutureFutureData"] }
            if ("WaterFuturePresentData" === id) { return ["WaterFuturePastData", "WaterFutureFutureData", "WaterPastPresentData", "WaterPresentPresentData"] }
            if ("WaterPastFutureData" === id) { return ["WaterPastPastData", "WaterPastPresentData", "WaterPresentFutureData", "WaterFutureFutureData", "WaterPresentPresentData", "WaterFuturePastData"] }
            if ("WaterPresentFutureData" === id) { return ["WaterPastFutureData", "WaterFutureFutureData", "WaterPresentPresentData", "WaterPresentPastData"] }
            if ("WaterFutureFutureData" === id) { return ["WaterFuturePastData", "WaterFuturePresentData", "WaterPastFutureData", "WaterPresentFutureData", "WaterPresentPresentData", "WaterPastPastData"] }

            if ("AirPastPastData" === id) { return ["AirPresentPastData", "AirFuturePastData", "AirPastPresentData", "AirPastFutureData", "AirPresentPresentData", "AirFutureFutureData"] }
            if ("AirPresentPastData" === id) { return ["AirPastPastData", "AirFuturePastData", "AirPresentPresentData", "AirPresentFutureData"] }
            if ("AirFuturePastData" === id) { return ["AirPastPastData", "AirPresentPastData", "AirFuturePresentData", "AirFutureFutureData", "AirPresentPresentData", "AirPastFutureData"] }
            if ("AirPastPresentData" === id) { return ["AirPastPastData", "AirPastFutureData", "AirPresentPresentData", "AirFuturePresentData"] }
            if ("AirPresentPresentData" === id) { return ["AirPastPastData", "AirPresentPastData", "AirFuturePastData", "AirPastPresentData", "AirFuturePresentData", "AirPastFutureData", "AirPresentFutureData", "AirFutureFutureData"] }
            if ("AirFuturePresentData" === id) { return ["AirFuturePastData", "AirFutureFutureData", "AirPastPresentData", "AirPresentPresentData"] }
            if ("AirPastFutureData" === id) { return ["AirPastPastData", "AirPastPresentData", "AirPresentFutureData", "AirFutureFutureData", "AirPresentPresentData", "AirFuturePastData"] }
            if ("AirPresentFutureData" === id) { return ["AirPastFutureData", "AirFutureFutureData", "AirPresentPresentData", "AirPresentPastData"] }
            if ("AirFutureFutureData" === id) { return ["AirFuturePastData", "AirFuturePresentData", "AirPastFutureData", "AirPresentFutureData", "AirPresentPresentData", "AirPastPastData"] }

            if ("EarthPastPastData" === id) { return ["EarthPresentPastData", "EarthFuturePastData", "EarthPastPresentData", "EarthPastFutureData", "EarthPresentPresentData", "EarthFutureFutureData"] }
            if ("EarthPresentPastData" === id) { return ["EarthPastPastData", "EarthFuturePastData", "EarthPresentPresentData", "EarthPresentFutureData"] }
            if ("EarthFuturePastData" === id) { return ["EarthPastPastData", "EarthPresentPastData", "EarthFuturePresentData", "EarthFutureFutureData", "EarthPresentPresentData", "EarthPastFutureData"] }
            if ("EarthPastPresentData" === id) { return ["EarthPastPastData", "EarthPastFutureData", "EarthPresentPresentData", "EarthFuturePresentData"] }
            if ("EarthPresentPresentData" === id) { return ["EarthPastPastData", "EarthPresentPastData", "EarthFuturePastData", "EarthPastPresentData", "EarthFuturePresentData", "EarthPastFutureData", "EarthPresentFutureData", "EarthFutureFutureData"] }
            if ("EarthFuturePresentData" === id) { return ["EarthFuturePastData", "EarthFutureFutureData", "EarthPastPresentData", "EarthPresentPresentData"] }
            if ("EarthPastFutureData" === id) { return ["EarthPastPastData", "EarthPastPresentData", "EarthPresentFutureData", "EarthFutureFutureData", "EarthPresentPresentData", "EarthFuturePastData"] }
            if ("EarthPresentFutureData" === id) { return ["EarthPastFutureData", "EarthFutureFutureData", "EarthPresentPresentData", "EarthPresentPastData"] }
            if ("EarthFutureFutureData" === id) { return ["EarthFuturePastData", "EarthFuturePresentData", "EarthPastFutureData", "EarthPresentFutureData", "EarthPresentPresentData", "EarthPastPastData"] }
        }
        function get_lo_shu_hexagram(id) {
            let data = iChingData;
            let row_column = get_lo_shu_row_column(currentLoShuHexagram)
            let externalTrigram = data.loShuGrouping[currentLoShuElement][row_column.column]
            let flattenedGrouping = [].concat(...data.loShuGrouping);
            let internalTrigram = flattenedGrouping[row_column.column, row_column.row]
            let hexagram = get_hexagram_from_trigrams(externalTrigram, internalTrigram)
            return hexagram
        }
        function show_symbol(symbolNumber) {
            let data = iChingData;
            let symbol = data.symbols[symbolNumber]
            let trigrams = data.trigrams
            let zodiac = data.zodiac
            let symbolTitle = document.getElementById("SymbolTitle")
            let symbolTrigram1 = document.getElementById("SymbolTrigram1")
            let symbolTrigram2 = document.getElementById("SymbolTrigram2")
            let symbolZodiac1 = document.getElementById("SymbolZodiac1")
            let symbolZodiac2 = document.getElementById("SymbolZodiac2")
            let externalTrigram = document.getElementById("ExternalTrigram")
            let externalZodiac = document.getElementById("ExternalZodiac")
            let externalDomicile = document.getElementById("ExternalDomicile")
            let externalDetriment = document.getElementById("ExternalDetriment")
            let externalExalted = document.getElementById("ExternalExalted")
            let externalFall = document.getElementById("ExternalFall")
            let internalTrigram = document.getElementById("InternalTrigram")
            let internalZodiac = document.getElementById("InternalZodiac")
            let internalDomicile = document.getElementById("InternalDomicile")
            let internalDetriment = document.getElementById("InternalDetriment")
            let internalExalted = document.getElementById("InternalExalted")
            let internalFall = document.getElementById("InternalFall")
            let commentary = document.getElementById("Commentary")
            let meaning = document.getElementById("Meaning")
            let currentSelected = document.getElementById("symbol" + currentSymbol) 
            let newSelected = document.getElementById("symbol" + symbolNumber) 
            let trigram1 = get_trigram(symbol.trigram1)
            let trigram2 = get_trigram(symbol.trigram2)
            let zodiac1 = get_zodiac(trigram1.zodiac)
            let zodiac2 = get_zodiac(trigram2.zodiac)
            symbolTitle.innerText = symbol.number + '. ' + symbol.name
            symbolTrigram1.innerText = symbol.trigram1
            symbolTrigram2.innerText = symbol.trigram2
            symbolZodiac1.innerText = zodiac1.symbol
            symbolZodiac2.innerText = zodiac2.symbol
            externalTrigram.innerText = symbol.trigram1 + ' ' + trigram1.name + ' (Earlier Heaven: ' + trigram1.earlier + ', Later Heaven: '  + trigram1.later + ')'
            externalZodiac.innerText = zodiac1.symbol + ' ' + zodiac1.name + ' (' + zodiac1.energy + ')'
            externalDomicile.innerText = get_domicile_string(zodiac1.symbol)
            externalDetriment.innerText = get_detriment_string(zodiac1.symbol)
            externalExalted.innerText = get_exalted_string(zodiac1.symbol)
            externalFall.innerText = get_fall_string(zodiac1.symbol)
            internalTrigram.innerText = symbol.trigram2 + ' ' + trigram2.name + ' (Earlier Heaven: ' + trigram2.earlier + ', Later Heaven: '  + trigram2.later + ')'
            internalZodiac.innerText = zodiac2.symbol + ' ' + zodiac2.name + ' (' + zodiac2.energy + ')'
            internalDomicile.innerText = get_domicile_string(zodiac2.symbol)
            internalDetriment.innerText = get_detriment_string(zodiac2.symbol)
            internalExalted.innerText = get_exalted_string(zodiac2.symbol)
            internalFall.innerText = get_fall_string(zodiac2.symbol)
            meaning.innerText = symbol.meaning
            commentary.innerText = symbol.commentary
            currentSelected.style.background = 'white'
            newSelected.style.background = 'lightgrey'
            currentSymbol = symbolNumber
        }
        function build_lo_shu_table(number) {
            let pastExternalHeader = document.getElementById("PastExternalHeader")
            let presentExternalHeader = document.getElementById("PresentExternalHeader")
            let futureExternalHeader = document.getElementById("FutureExternalHeader")

            let firePastInternalHeader = document.getElementById("FirePastInternalHeader")
            let firePastPastData = document.getElementById("FirePastPastData")
            let firePresentPastData = document.getElementById("FirePresentPastData")
            let fireFuturePastData = document.getElementById("FireFuturePastData")
            let firePresentInternalHeader = document.getElementById("FirePresentInternalHeader")
            let firePastPresentData = document.getElementById("FirePastPresentData")
            let firePresentPresentData = document.getElementById("FirePresentPresentData")
            let fireFuturePresentData = document.getElementById("FireFuturePresentData")
            let fireFutureInternalHeader = document.getElementById("FireFutureInternalHeader")
            let firePastFutureData = document.getElementById("FirePastFutureData")
            let firePresentFutureData = document.getElementById("FirePresentFutureData")
            let fireFutureFutureData = document.getElementById("FireFutureFutureData")

            let waterPastInternalHeader = document.getElementById("WaterPastInternalHeader")
            let waterPastPastData = document.getElementById("WaterPastPastData")
            let waterPresentPastData = document.getElementById("WaterPresentPastData")
            let waterFuturePastData = document.getElementById("WaterFuturePastData")
            let waterPresentInternalHeader = document.getElementById("WaterPresentInternalHeader")
            let waterPastPresentData = document.getElementById("WaterPastPresentData")
            let waterPresentPresentData = document.getElementById("WaterPresentPresentData")
            let waterFuturePresentData = document.getElementById("WaterFuturePresentData")
            let waterFutureInternalHeader = document.getElementById("WaterFutureInternalHeader")
            let waterPastFutureData = document.getElementById("WaterPastFutureData")
            let waterPresentFutureData = document.getElementById("WaterPresentFutureData")
            let waterFutureFutureData = document.getElementById("WaterFutureFutureData")

            let airPastInternalHeader = document.getElementById("AirPastInternalHeader")
            let airPastPastData = document.getElementById("AirPastPastData")
            let airPresentPastData = document.getElementById("AirPresentPastData")
            let airFuturePastData = document.getElementById("AirFuturePastData")
            let airPresentInternalHeader = document.getElementById("AirPresentInternalHeader")
            let airPastPresentData = document.getElementById("AirPastPresentData")
            let airPresentPresentData = document.getElementById("AirPresentPresentData")
            let airFuturePresentData = document.getElementById("AirFuturePresentData")
            let airFutureInternalHeader = document.getElementById("AirFutureInternalHeader")
            let airPastFutureData = document.getElementById("AirPastFutureData")
            let airPresentFutureData = document.getElementById("AirPresentFutureData")
            let airFutureFutureData = document.getElementById("AirFutureFutureData")

            let earthPastInternalHeader = document.getElementById("EarthPastInternalHeader")
            let earthPastPastData = document.getElementById("EarthPastPastData")
            let earthPresentPastData = document.getElementById("EarthPresentPastData")
            let earthFuturePastData = document.getElementById("EarthFuturePastData")
            let earthPresentInternalHeader = document.getElementById("EarthPresentInternalHeader")
            let earthPastPresentData = document.getElementById("EarthPastPresentData")
            let earthPresentPresentData = document.getElementById("EarthPresentPresentData")
            let earthFuturePresentData = document.getElementById("EarthFuturePresentData")
            let earthFutureInternalHeader = document.getElementById("EarthFutureInternalHeader")
            let earthPastFutureData = document.getElementById("EarthPastFutureData")
            let earthPresentFutureData = document.getElementById("EarthPresentFutureData")
            let earthFutureFutureData = document.getElementById("EarthFutureFutureData")

            let data = iChingData;
            let externalTrigrams = data.loShuGrouping[number]
            let pastTrigram = get_trigram(externalTrigrams[0])
            let presentTrigram = get_trigram(externalTrigrams[1])
            let futureTrigram = get_trigram(externalTrigrams[2])

            pastExternalHeader.innerText = "External " + pastTrigram.symbol + "  " + pastTrigram.zodiac
            presentExternalHeader.innerText = "External " + presentTrigram.symbol + "  " + presentTrigram.zodiac
            futureExternalHeader.innerText = "External " + futureTrigram.symbol + "  " + futureTrigram.zodiac

            let pastFireTrigram = get_trigram(data.loShuGrouping[0][0])
            let presentFireTrigram = get_trigram(data.loShuGrouping[0][1])
            let futureFireTrigram = get_trigram(data.loShuGrouping[0][2])

            firePastInternalHeader.innerText = pastFireTrigram.symbol + "  " + pastFireTrigram.zodiac
            firePresentInternalHeader.innerText = presentFireTrigram.symbol + "  " + presentFireTrigram.zodiac
            fireFutureInternalHeader.innerText = futureFireTrigram.symbol + "  " + futureFireTrigram.zodiac

            let firePastPastHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, pastFireTrigram.symbol)
            let firePastPresentHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, presentFireTrigram.symbol)
            let firePastFutureHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, futureFireTrigram.symbol)
            let firePresentPastHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, pastFireTrigram.symbol)
            let firePresentPresentHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, presentFireTrigram.symbol)
            let firePresentFutureHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, futureFireTrigram.symbol)
            let fireFuturePastHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, pastFireTrigram.symbol)
            let fireFuturePresentHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, presentFireTrigram.symbol)
            let fireFutureFutureHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, futureFireTrigram.symbol)

            firePastPastData.innerText = firePastPastHexagram.number + ". " + firePastPastHexagram.name
            firePastPresentData.innerText = firePastPresentHexagram.number + ". " + firePastPresentHexagram.name
            firePastFutureData.innerText = firePastFutureHexagram.number + ". " + firePastFutureHexagram.name
            firePresentPastData.innerText = firePresentPastHexagram.number + ". " + firePresentPastHexagram.name
            firePresentPresentData.innerText = firePresentPresentHexagram.number + ". " + firePresentPresentHexagram.name
            firePresentFutureData.innerText = firePresentFutureHexagram.number + ". " + firePresentFutureHexagram.name
            fireFuturePastData.innerText = fireFuturePastHexagram.number + ". " + fireFuturePastHexagram.name
            fireFuturePresentData.innerText = fireFuturePresentHexagram.number + ". " + fireFuturePresentHexagram.name
            fireFutureFutureData.innerText = fireFutureFutureHexagram.number + ". " + fireFutureFutureHexagram.name

            let pastWaterTrigram = get_trigram(data.loShuGrouping[1][0])
            let presentWaterTrigram = get_trigram(data.loShuGrouping[1][1])
            let futureWaterTrigram = get_trigram(data.loShuGrouping[1][2])

            waterPastInternalHeader.innerText = pastWaterTrigram.symbol + "  " + pastWaterTrigram.zodiac
            waterPresentInternalHeader.innerText = presentWaterTrigram.symbol + "  " + presentWaterTrigram.zodiac
            waterFutureInternalHeader.innerText = futureWaterTrigram.symbol + "  " + futureWaterTrigram.zodiac

            let waterPastPastHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, pastWaterTrigram.symbol)
            let waterPastPresentHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, presentWaterTrigram.symbol)
            let waterPastFutureHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, futureWaterTrigram.symbol)
            let waterPresentPastHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, pastWaterTrigram.symbol)
            let waterPresentPresentHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, presentWaterTrigram.symbol)
            let waterPresentFutureHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, futureWaterTrigram.symbol)
            let waterFuturePastHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, pastWaterTrigram.symbol)
            let waterFuturePresentHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, presentWaterTrigram.symbol)
            let waterFutureFutureHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, futureWaterTrigram.symbol)

            waterPastPastData.innerText = waterPastPastHexagram.number + ". " + waterPastPastHexagram.name
            waterPastPresentData.innerText = waterPastPresentHexagram.number + ". " + waterPastPresentHexagram.name
            waterPastFutureData.innerText = waterPastFutureHexagram.number + ". " + waterPastFutureHexagram.name
            waterPresentPastData.innerText = waterPresentPastHexagram.number + ". " + waterPresentPastHexagram.name
            waterPresentPresentData.innerText = waterPresentPresentHexagram.number + ". " + waterPresentPresentHexagram.name
            waterPresentFutureData.innerText = waterPresentFutureHexagram.number + ". " + waterPresentFutureHexagram.name
            waterFuturePastData.innerText = waterFuturePastHexagram.number + ". " + waterFuturePastHexagram.name
            waterFuturePresentData.innerText = waterFuturePresentHexagram.number + ". " + waterFuturePresentHexagram.name
            waterFutureFutureData.innerText = waterFutureFutureHexagram.number + ". " + waterFutureFutureHexagram.name

            let pastAirTrigram = get_trigram(data.loShuGrouping[2][0])
            let presentAirTrigram = get_trigram(data.loShuGrouping[2][1])
            let futureAirTrigram = get_trigram(data.loShuGrouping[2][2])

            airPastInternalHeader.innerText = pastAirTrigram.symbol + "  " + pastAirTrigram.zodiac
            airPresentInternalHeader.innerText = presentAirTrigram.symbol + "  " + presentAirTrigram.zodiac
            airFutureInternalHeader.innerText = futureAirTrigram.symbol + "  " + futureAirTrigram.zodiac

            let airPastPastHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, pastAirTrigram.symbol)
            let airPastPresentHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, presentAirTrigram.symbol)
            let airPastFutureHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, futureAirTrigram.symbol)
            let airPresentPastHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, pastAirTrigram.symbol)
            let airPresentPresentHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, presentAirTrigram.symbol)
            let airPresentFutureHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, futureAirTrigram.symbol)
            let airFuturePastHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, pastAirTrigram.symbol)
            let airFuturePresentHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, presentAirTrigram.symbol)
            let airFutureFutureHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, futureAirTrigram.symbol)

            airPastPastData.innerText = airPastPastHexagram.number + ". " + airPastPastHexagram.name
            airPastPresentData.innerText = airPastPresentHexagram.number + ". " + airPastPresentHexagram.name
            airPastFutureData.innerText = airPastFutureHexagram.number + ". " + airPastFutureHexagram.name
            airPresentPastData.innerText = airPresentPastHexagram.number + ". " + airPresentPastHexagram.name
            airPresentPresentData.innerText = airPresentPresentHexagram.number + ". " + airPresentPresentHexagram.name
            airPresentFutureData.innerText = airPresentFutureHexagram.number + ". " + airPresentFutureHexagram.name
            airFuturePastData.innerText = airFuturePastHexagram.number + ". " + airFuturePastHexagram.name
            airFuturePresentData.innerText = airFuturePresentHexagram.number + ". " + airFuturePresentHexagram.name
            airFutureFutureData.innerText = airFutureFutureHexagram.number + ". " + airFutureFutureHexagram.name

            let pastEarthTrigram = get_trigram(data.loShuGrouping[3][0])
            let presentEarthTrigram = get_trigram(data.loShuGrouping[3][1])
            let futureEarthTrigram = get_trigram(data.loShuGrouping[3][2])

            earthPastInternalHeader.innerText = pastEarthTrigram.symbol + "  " + pastEarthTrigram.zodiac
            earthPresentInternalHeader.innerText = presentEarthTrigram.symbol + "  " + presentEarthTrigram.zodiac
            earthFutureInternalHeader.innerText = futureEarthTrigram.symbol + "  " + futureEarthTrigram.zodiac

            let earthPastPastHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, pastEarthTrigram.symbol)
            let earthPastPresentHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, presentEarthTrigram.symbol)
            let earthPastFutureHexagram = get_hexagram_from_trigrams(pastTrigram.symbol, futureEarthTrigram.symbol)
            let earthPresentPastHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, pastEarthTrigram.symbol)
            let earthPresentPresentHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, presentEarthTrigram.symbol)
            let earthPresentFutureHexagram = get_hexagram_from_trigrams(presentTrigram.symbol, futureEarthTrigram.symbol)
            let earthFuturePastHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, pastEarthTrigram.symbol)
            let earthFuturePresentHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, presentEarthTrigram.symbol)
            let earthFutureFutureHexagram = get_hexagram_from_trigrams(futureTrigram.symbol, futureEarthTrigram.symbol)

            earthPastPastData.innerText = earthPastPastHexagram.number + ". " + earthPastPastHexagram.name
            earthPastPresentData.innerText = earthPastPresentHexagram.number + ". " + earthPastPresentHexagram.name
            earthPastFutureData.innerText = earthPastFutureHexagram.number + ". " + earthPastFutureHexagram.name
            earthPresentPastData.innerText = earthPresentPastHexagram.number + ". " + earthPresentPastHexagram.name
            earthPresentPresentData.innerText = earthPresentPresentHexagram.number + ". " + earthPresentPresentHexagram.name
            earthPresentFutureData.innerText = earthPresentFutureHexagram.number + ". " + earthPresentFutureHexagram.name
            earthFuturePastData.innerText = earthFuturePastHexagram.number + ". " + earthFuturePastHexagram.name
            earthFuturePresentData.innerText = earthFuturePresentHexagram.number + ". " + earthFuturePresentHexagram.name
            earthFutureFutureData.innerText = earthFutureFutureHexagram.number + ". " + earthFutureFutureHexagram.name

            select_lo_shu_hexagram(currentLoShuHexagram)
        }
        function set_lo_shu_element(number) {
            let loShuElementFire = document.getElementById("LoShuElementFire")
            let loShuElementWater = document.getElementById("LoShuElementWater")
            let loShuElementAir = document.getElementById("LoShuElementAir")
            let loShuElementEarth = document.getElementById("LoShuElementEarth")

            currentLoShuElement = number
            if (0 === currentLoShuElement) { loShuElementFire.style.background = 'lightgrey' }
            else { loShuElementFire.style.background = 'white' }
            if (1 === currentLoShuElement) { loShuElementWater.style.background = 'lightgrey' }
            else { loShuElementWater.style.background = 'white' }
            if (2 === currentLoShuElement) { loShuElementAir.style.background = 'lightgrey' }
            else { loShuElementAir.style.background = 'white' }
            if (3 === currentLoShuElement) { loShuElementEarth.style.background = 'lightgrey' }
            else { loShuElementEarth.style.background = 'white' }
            build_lo_shu_table(number)
        }
        function build_symbol_index() {
            let data = iChingData;
            let parentNode = document.getElementById('SymbolIndexes')
            if (!data.symbols) { return }
            if (!parentNode) { return }
            for (let loop = 0; loop < data.symbols.length; loop++) {
                let symbol = data.symbols[loop]
                let symbolNumber = symbol.number
                let symbolName = symbol.name
                let divnode = document.createElement("DIV")
                let textnode = document.createTextNode(symbolNumber + '. ' + symbolName)
                divnode.id = "symbol" + loop
                divnode.style = "cursor: pointer;"
                divnode.onclick = function() { show_symbol(symbolNumber - 1); }
                parentNode.appendChild(divnode)
                divnode.appendChild(textnode)
            }
            let divnode = document.createElement("DIV")
            let textnode = document.createTextNode('.')
            divnode.style.color = "white"
            parentNode.appendChild(divnode)
            divnode.appendChild(textnode)
            divnode = document.createElement("DIV")
            textnode = document.createTextNode('.')
            divnode.style.color = "white"
            parentNode.appendChild(divnode)
            divnode.appendChild(textnode)
            divnode = document.createElement("DIV")
            textnode = document.createTextNode('.')
            divnode.style.color = "white"
            parentNode.appendChild(divnode)
            divnode.appendChild(textnode)
            show_symbol(0)
        }
        function calculateRightNow() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(getPos);
            } else {
                alert("Location services are currently unavailable for this app. Please check system settings.")
            }
            function getPos(position) {
                let calculating = document.getElementById("RightNowCalculating")
                let rightNowHexagram = document.getElementById("RightNowHexagram")
                let rightNowSymbolTitle = document.getElementById("RightNowSymbolTitle")
                let rightNowSymbolTrigram1 = document.getElementById("RightNowSymbolTrigram1")
                let rightNowSymbolTrigram2 = document.getElementById("RightNowSymbolTrigram2")
                let rightNowSymbolZodiac1 = document.getElementById("RightNowSymbolZodiac1")
                let rightNowSymbolZodiac2 = document.getElementById("RightNowSymbolZodiac2")
                let rightNowExternalTrigram = document.getElementById("RightNowExternalTrigram")
                let rightNowExternalZodiac = document.getElementById("RightNowExternalZodiac")
                let rightNowExternalDomicile = document.getElementById("RightNowExternalDomicile")
                let rightNowExternalDetriment = document.getElementById("RightNowExternalDetriment")
                let rightNowExternalExalted = document.getElementById("RightNowExternalExalted")
                let rightNowExternalFall = document.getElementById("RightNowExternalFall")
                let rightNowInternalTrigram = document.getElementById("RightNowInternalTrigram")
                let rightNowInternalZodiac = document.getElementById("RightNowInternalZodiac")
                let rightNowInternalDomicile = document.getElementById("RightNowInternalDomicile")
                let rightNowInternalDetriment = document.getElementById("RightNowInternalDetriment")
                let rightNowInternalExalted = document.getElementById("RightNowInternalExalted")
                let rightNowInternalFall = document.getElementById("RightNowInternalFall")
                let rightNowCommentary = document.getElementById("RightNowCommentary")
                let rightNowMeaning = document.getElementById("RightNowMeaning")

                calculating.style.display = "inline"
                rightNowHexagram.style.display = "none"

                let currentDate = new Date()
                let x = calPlanetPosition2( currentDate.getFullYear(), currentDate.getMonth() + 1, currentDate.getDate(), currentDate.getHours(), currentDate.getMinutes(), position.coords.longitude, position.coords.latitude )
                let y = convert_degrees_to_zodiac(x)
                let sunSign = y[1]
                let risingSign = y[13]
                let trigram1 = get_trigram_from_zodiac(sunSign)
                let trigram2 = get_trigram_from_zodiac(risingSign)
                let zodiac1 = get_zodiac(sunSign)
                let zodiac2 = get_zodiac(risingSign)
                let hexagram = get_hexagram_from_trigrams(trigram1.symbol, trigram2.symbol)

                calculating.style.display = "none"
                rightNowHexagram.style.display = "inline"
                rightNowSymbolTitle.innerText = hexagram.number + ". " + hexagram.name
                rightNowSymbolTrigram1.innerText = hexagram.trigram1
                rightNowSymbolTrigram2.innerText = hexagram.trigram2
                rightNowSymbolZodiac1.innerText = zodiac1.symbol
                rightNowSymbolZodiac2.innerText = zodiac2.symbol
                rightNowExternalTrigram.innerText = hexagram.trigram1 + ' ' + trigram1.name + ' (Earlier Heaven: ' + trigram1.earlier + ', Later Heaven: '  + trigram1.later + ')'
                rightNowExternalZodiac.innerText = zodiac1.symbol + ' ' + zodiac1.name + ' (' + zodiac1.energy + ')'
                rightNowExternalDomicile.innerText = get_domicile_string(zodiac1.symbol)
                rightNowExternalDetriment.innerText = get_detriment_string(zodiac1.symbol)
                rightNowExternalExalted.innerText = get_exalted_string(zodiac1.symbol)
                rightNowExternalFall.innerText = get_fall_string(zodiac1.symbol)
                rightNowInternalTrigram.innerText = hexagram.trigram2 + ' ' + trigram2.name + ' (Earlier Heaven: ' + trigram2.earlier + ', Later Heaven: '  + trigram2.later + ')'
                rightNowInternalZodiac.innerText = zodiac2.symbol + ' ' + zodiac2.name + ' (' + zodiac2.energy + ')'
                rightNowInternalDomicile.innerText = get_domicile_string(zodiac2.symbol)
                rightNowInternalDetriment.innerText = get_detriment_string(zodiac2.symbol)
                rightNowInternalExalted.innerText = get_exalted_string(zodiac2.symbol)
                rightNowInternalFall.innerText = get_fall_string(zodiac2.symbol)
                rightNowMeaning.innerText = hexagram.meaning
                rightNowCommentary.innerText = hexagram.commentary
            }
        }
        function drawOctacross() {
            let paper = Raphael("OctacrossPaper", 600, 600)
            let path = ""
            let x = 300
            let y = 300
            let N = 16
            let side = 240
            let xArray = []
            let yArray = []

            paperObjects = []
            for (let n = 0; n <= N; n += 1) {
                // the angle (in radians) as an nth fraction of the whole circle
                let angle = n / N * 2 * Math.PI
                // The starting x value of the point adjusted by the angle
                let temp_x = x + Math.cos(angle) * side
                // The starting y value of the point adjusted by the angle
                let temp_y = y + Math.sin(angle) * side

                // Start with "M" if it's the first point, otherwise L
                path += (n === 0 ? "M" : "L") + temp_x + "," + temp_y
                xArray.push(temp_x)
                yArray.push(temp_y)
            }
            let f = paper.path(path)
            paperObjects.push(f)
            path = "M" + xArray[0] + "," + yArray[0]
            path += "L" + xArray[3] + "," + yArray[3]
            path += "L" + xArray[6] + "," + yArray[6]
            path += "L" + xArray[9] + "," + yArray[9]
            path += "L" + xArray[12] + "," + yArray[12]
            path += "L" + xArray[15] + "," + yArray[15]
            path += "L" + xArray[2] + "," + yArray[2]
            path += "L" + xArray[5] + "," + yArray[5]
            path += "L" + xArray[8] + "," + yArray[8]
            path += "L" + xArray[11] + "," + yArray[11]
            path += "L" + xArray[14] + "," + yArray[14]
            path += "L" + xArray[1] + "," + yArray[1]
            path += "L" + xArray[4] + "," + yArray[4]
            path += "L" + xArray[7] + "," + yArray[7]
            path += "L" + xArray[10] + "," + yArray[10]
            path += "L" + xArray[13] + "," + yArray[13]
            path += "L" + xArray[0] + "," + yArray[0]
            let g = paper.path(path)
            paperObjects.push(g)
            paperObjects.push(g.glow({color: "blue"}))

            for (let loop1 = 0; loop1 < xArray.length; loop1++) {
                for (let loop2 = 0; loop2 < xArray.length; loop2++) {
                    if (loop1 === loop2) { continue; }
                    path = "M" + xArray[loop1] + "," + yArray[loop1]
                    path += "L" + xArray[loop2] + "," + yArray[loop2]
                    let line = paper.path(path)
                    paperObjects.push(line)
                }
            }
        }
        function deleteOctacross() {
            for (let loop = 0; loop < paperObjects.length; loop++) {
                paperObjects[loop].remove()
            }
        }
        function set_menu(number) {
            currentMenuItem = number
            draw_menu()
            draw_content()
        }
        function draw_menu() {
            let randomOverTimeMenuItem = document.getElementById("MenuBarRandomOverTime")
            let loShuMenuItem = document.getElementById("MenuBarLoShu")
            let octacrossAndTarotMenuItem = document.getElementById("MenuBarOctacrossAndTarot")
            let rightNowMenuItem = document.getElementById("MenuBarRightNow")
            let listMenuItem = document.getElementById("MenuBarList")
            let docsMenuItem = document.getElementById("MenuBarDocs")

            if (0 === currentMenuItem) { randomOverTimeMenuItem.style.background = 'lightgrey' }
            else { randomOverTimeMenuItem.style.background = 'white' }
            if (1 === currentMenuItem) { loShuMenuItem.style.background = 'lightgrey' }
            else { loShuMenuItem.style.background = 'white' }
            if (2 === currentMenuItem) { octacrossAndTarotMenuItem.style.background = 'lightgrey' }
            else { octacrossAndTarotMenuItem.style.background = 'white' }
            if (3 === currentMenuItem) { rightNowMenuItem.style.background = 'lightgrey' }
            else { rightNowMenuItem.style.background = 'white' }
            if (4 === currentMenuItem) { listMenuItem.style.background = 'lightgrey' }
            else { listMenuItem.style.background = 'white' }
            if (5 === currentMenuItem) { docsMenuItem.style.background = 'lightgrey' }
            else { docsMenuItem.style.background = 'white' }
        }
        function draw_content() {
            let randomContent = document.getElementById("RandomContent")
            let loShuContent = document.getElementById("LoShuContent")
            let octacrossContent = document.getElementById("OctacrossContent")
            let rightNowContent = document.getElementById("RightNowContent")
            let listContent = document.getElementById("ListContent")
            let docsContent = document.getElementById("DocsContent")

            if (0 === currentMenuItem) { randomContent.style.display = 'flex'; update_random_hexagram() }
            else { randomContent.style.display = 'none' }
            if (1 === currentMenuItem) { loShuContent.style.display = 'flex';  set_lo_shu_element(currentLoShuElement); }
            else { loShuContent.style.display = 'none' }
            if (2 === currentMenuItem) { octacrossContent.style.display = 'flex'; drawOctacross() }
            else { octacrossContent.style.display = 'none'; deleteOctacross() }
            if (3 === currentMenuItem) { rightNowContent.style.display = 'flex' }
            else { rightNowContent.style.display = 'none' }
            if (4 === currentMenuItem) { listContent.style.display = 'flex' }
            else { listContent.style.display = 'none' }
            if (5 === currentMenuItem) { docsContent.style.display = 'flex'; }
            else { docsContent.style.display = 'none' }
        }

        var iChingData = {
            "loShuGrouping" : [
                ["☲", "⚎", "☳"],
                ["☵", "⚍", "☴"],
                ["☰", "⚌", "☱"],
                ["☷", "⚏", "☶"]
            ],
            "trigrams" : [
                {
                    "symbol" : "☰",
                    "name" : "Heaven",
                    "earlier": "South",
                    "later": "Northwest",
                    "zodiac" : "♊︎"
                },
                {
                    "symbol" : "☱",
                    "name" : "Lake",
                    "earlier": "Southeast",
                    "later": "West",
                    "zodiac" : "♎︎"
                },
                {
                    "symbol" : "☲",
                    "name" : "Fire",
                    "earlier": "East",
                    "later": "South",
                    "zodiac" : "♐︎"
                },
                {
                    "symbol" : "☳",
                    "name" : "Thunder",
                    "earlier": "Northeast",
                    "later": "East",
                    "zodiac" : "♈︎"
                },
                {
                    "symbol" : "☴",
                    "name" : "Wind",
                    "earlier": "Southwest",
                    "later": "Southeast",
                    "zodiac" : "♋︎"
                },
                {
                    "symbol" : "☵",
                    "name" : "Water",
                    "earlier": "West",
                    "later": "North",
                    "zodiac" : "♓︎"
                },
                {
                    "symbol" : "☶",
                    "name" : "Mountain",
                    "earlier": "Northwest",
                    "later": "Northeast",
                    "zodiac" : "♑︎"
                },
                {
                    "symbol" : "☷",
                    "name" : "Earth",
                    "earlier": "North",
                    "later": "Southwest",
                    "zodiac" : "♍︎"
                },
                {
                    "symbol" : "⚎",
                    "name" : "Lesser Yang",
                    "earlier": "None",
                    "later": "None",
                    "zodiac" : "♌︎"
                },
                {
                    "symbol" : "⚌",
                    "name" : "Greater Yang",
                    "earlier": "None",
                    "later": "None",
                    "zodiac" : "♒︎"
                },
                {
                    "symbol" : "⚍",
                    "name" : "Lesser Yin",
                    "earlier": "None",
                    "later": "None",
                    "zodiac" : "♏︎"
                },
                {
                    "symbol" : "⚏",
                    "name" : "Greater Yin",
                    "earlier": "None",
                    "later": "None",
                    "zodiac" : "♉︎"
                }
            ],
            "planets" : [
            {
                    "symbol" : "☉",
                    "name" : "Sun"
                },
                {
                    "symbol" : "☽︎",
                    "name" : "Moon"
                },
                {
                    "symbol" : "☿",
                    "name" : "Mercury"
                },
                {
                    "symbol" : "♀",
                    "name" : "Venus"
                },
                {
                    "symbol" : "♂",
                    "name" : "Mars"
                },
                {
                    "symbol" : "♃",
                    "name" : "Jupiter"
                },
                {
                    "symbol" : "♄",
                    "name" : "Saturn"
                },
                {
                    "symbol" : "♆",
                    "name" : "Neptune"
                },
                {
                    "symbol" : "♅",
                    "name" : "Uranus"
                },
                {
                    "symbol" : "♇",
                    "name" : "Pluto"
                }
            ],
            "zodiac" : [
                {
                    "symbol" : "♈︎",
                    "name" : "Aries",
                    "domicile" : ["♂"],
                    "detriment" : ["♀"],
                    "exalted" : ["☉"],
                    "fall" : ["♄"],
                    "energy" : "Future Action"
                },
                {
                    "symbol" : "♉︎",
                    "name" : "Taurus",
                    "domicile" : ["♀"],
                    "detriment" : ["♂"],
                    "exalted" : ["☽︎"],
                    "fall" : ["♅"],
                    "energy" : "Present World"
                },
                {
                    "symbol" : "♊︎",
                    "name" : "Gemini",
                    "domicile" : ["☿"],
                    "detriment" : ["♃"],
                    "exalted" : [],
                    "fall" : [],
                    "energy" : "Past Thought"
                },
                {
                    "symbol" : "♋︎",
                    "name" : "Cancer",
                    "domicile" : ["☽︎"],
                    "detriment" : ["♄"],
                    "exalted" : ["♃"],
                    "fall" : ["♂"],
                    "energy" : "Future Emotion"
                },
                {
                    "symbol" : "♌︎",
                    "name" : "Leo",
                    "domicile" : ["☉"],
                    "detriment" : ["♄"],
                    "exalted" : [],
                    "fall" : ["♇"],
                    "energy" : "Present Action"
                },
                {
                    "symbol" : "♍︎",
                    "name" : "Virgo",   
                    "domicile" : ["☿"],
                    "detriment" : ["♃"],
                    "exalted" : ["☿"],
                    "fall" : ["♀"],
                    "energy" : "Past World"
                },
                {
                    "symbol" : "♎︎",
                    "name" : "Libra",
                    "domicile" : ["♀"],
                    "detriment" : ["♂"],
                    "exalted" : ["♄"],
                    "fall" : ["☉"],
                    "energy" : "Future Thought"
                },
                {
                    "symbol" : "♏︎",
                    "name" : "Scorpio",
                    "domicile" : ["♂", "♇"],
                    "detriment" : [],
                    "exalted" : [],
                    "fall" : ["☽︎"],
                    "energy" : "Present Emotion"
                },
                {
                    "symbol" : "♐︎",
                    "name" : "Sagittarius",
                    "domicile" : ["♃"],
                    "detriment" : ["☿"],
                    "exalted" : [],
                    "fall" : [],
                    "energy" : "Past Action"
                },
                {
                    "symbol" : "♑︎",
                    "name" : "Capricorn",
                    "domicile" : ["♄"],
                    "detriment" : ["☽︎"],
                    "exalted" : ["♂"],
                    "fall" : ["♃"],
                    "energy" : "Future World"
                },
                {
                    "symbol" : "♒︎",
                    "name" : "Aquarius",
                    "domicile" : ["♄", "♅"],
                    "detriment" : ["☉"],
                    "exalted" : [],
                    "fall" : [],
                    "energy" : "Present Thought"
                },
                {
                    "symbol" : "♓︎",
                    "name" : "Pisces",
                    "domicile" : ["♃", "♆"],
                    "detriment" : ["☿"],
                    "exalted" : ["♀"],
                    "fall" : ["☿"],
                    "energy" : "Past Emotion"
                }
            ],    
            "symbols" : [
                {
                    "number" : 1, 
                    "name": "The Creative",
                    "meaning" : "Possessing creative power and skill.",
                    "commentary" : "The Creative is Gemini externally and internally. Gemini, Past Thought, is home to Mercury, the Logos.",
                    "trigram1" : "☰", 
                    "trigram2" : "☰"
                },
                {
                    "number" : 2, 
                    "name": "The Receptive",
                    "meaning" : "Needing knowledge and skill. Do not force matters and go with the flow.",
                    "commentary" : "The Receptive is Virgo enternally and internally. Virgo, Past World, is home to Mercury, the Logos. Heaven and Earth, while different from one another, share a certain nature.",
                    "trigram1" : "☷", 
                    "trigram2" : "☷"
                },
                {
                    "number" : 3, 
                    "name": "Difficulty",
                    "meaning" : "Sprouting.",
                    "commentary" : "Past Emotions externally, Future Action internally. New work is started, but success is not certain.",
                    "trigram1" : "☵", 
                    "trigram2" : "☳"
                },
                {
                    "number" : 4, 
                    "name": "Innocence",
                    "meaning" : "Detained, enveloped, and inexperienced.",
                    "commentary" : "Future World externally, Past Emotions internally. The world does not work the way you believe it does.",
                    "trigram1" : "☶", 
                    "trigram2" : "☵"
                },
                {
                    "number" : 5, 
                    "name": "Waiting",
                    "meaning" : "Uninvolved (waiting for now), nourishment.",
                    "commentary" : "Past Emotions externally, Past Thought internally. New problems can be dealt with by waiting.",
                    "trigram1" : "☵", 
                    "trigram2" : "☰"
                },
                {
                    "number" : 6, 
                    "name": "Contention",
                    "meaning" : "Engagement in conflict.",
                    "commentary" : "Past Thought externally, Past Emotions internally. New problems cause contention, seek wisdom.",
                    "trigram1" : "☰", 
                    "trigram2" : "☵"
                },
                {
                    "number" : 7, 
                    "name": "An Army",
                    "meaning" : "Bringing together. Teamwork.",
                    "commentary" : "Past World externally, Past Emotions internally. This is patriotism. An army that has succeeded is passive.",
                    "trigram1" : "☷", 
                    "trigram2" : "☵"
                },
                {
                    "number" : 8, 
                    "name": "Accord",
                    "meaning" : "Union.",
                    "commentary" : "Past Emotions externally, Past World internally. There is accord.",
                    "trigram1" : "☵", 
                    "trigram2" : "☷"
                },
                {
                    "number" : 9, 
                    "name": "Nurture of the Small",
                    "meaning" : "Accumulating resources.",
                    "commentary" : "Future Emotions externally, Past Thought internally. Take advantage of new relationships.",
                    "trigram1" : "☴", 
                    "trigram2" : "☰"
                },
                {
                    "number" : 10, 
                    "name": "Treading",
                    "meaning" : "Continuing with alertness.",
                    "commentary" : "Past Thought externally, Future Thought internally. Resistance is slight, but stay mindful.",
                    "trigram1" : "☰", 
                    "trigram2" : "☱"
                },
                {
                    "number" : 11, 
                    "name": "Tranquillity",
                    "meaning" : "Prevading.",
                    "commentary" : "Past World externally, Past Thought internally. This is tranquillity.",
                    "trigram1" : "☷", 
                    "trigram2" : "☰"
                },
                {
                    "number" : 12, 
                    "name": "Obstruction",
                    "meaning" : "Stagnation.",
                    "commentary" : "Past Thought externally, Past World internally. This is stagnation.",
                    "trigram1" : "☰", 
                    "trigram2" : "☷"
                },
                {
                    "number" : 13, 
                    "name": "Sameness With People",
                    "meaning" : "Fellowship. Partnership.",
                    "commentary" : "Past Thought externally, Past Action internally. Actions match the thoughts of the people, which is sameness.",
                    "trigram1" : "☰", 
                    "trigram2" : "☲"
                },
                {
                    "number" : 14, 
                    "name": "Great Possession",
                    "meaning" : "Independance. Freedom.",
                    "commentary" : "Past Actions externally, Past Thought internally. There is no resistance to your goals.",
                    "trigram1" : "☲", 
                    "trigram2" : "☰"
                },
                {
                    "number" : 15, 
                    "name": "Humility",
                    "meaning" : "Being reserved, refraining.",
                    "commentary" : "Past World externally, Future World internally. Show respect and there is success.",
                    "trigram1" : "☷", 
                    "trigram2" : "☶"
                },
                {
                    "number" : 16, 
                    "name": "Happiness",
                    "meaning" : "Inducement, new stimulus.",
                    "commentary" : "Future Action Externally, Past World internally. New experiences bring happiness.",
                    "trigram1" : "☳", 
                    "trigram2" : "☷"
                },
                {
                    "number" : 17, 
                    "name": "Following",
                    "meaning" : "Following",
                    "commentary" : "Future Thought externally, Future Action internally. The people believe in what you do.",
                    "trigram1" : "☱", 
                    "trigram2" : "☳"
                },
                {
                    "number" : 18, 
                    "name": "Disruption",
                    "meaning" : "Repairing.",
                    "commentary" : "Future World externally, Future Emotions internally. The old ways slip away.",
                    "trigram1" : "☶", 
                    "trigram2" : "☴"
                },
                {
                    "number" : 19, 
                    "name": "Overseeing",
                    "meaning" : "Approching goal, arriving.",
                    "commentary" : "Past World externally, Future Thought internally. Bringing change requires careful management.",
                    "trigram1" : "☷", 
                    "trigram2" : "☱"
                },
                {
                    "number" : 20, 
                    "name": "Observing",
                    "meaning" : "The Withholding.",
                    "commentary" : "Future Emotions externally, Past World internally. The sacred is held on high.",
                    "trigram1" : "☴", 
                    "trigram2" : "☷"
                },
                {
                    "number" : 21, 
                    "name": "Biting Through",
                    "meaning" : "Deciding.",
                    "commentary" : "Past Actions externally, Future Actions internally. With care, there is success.",
                    "trigram1" : "☲", 
                    "trigram2" : "☳"
                },
                {
                    "number" : 22, 
                    "name": "Adornment",
                    "meaning" : "Embellishing.",
                    "commentary" : "Future World externally, Past Actions internally. Acceptance of the new in terms of the past.",
                    "trigram1" : "☶", 
                    "trigram2" : "☲"
                },
                {
                    "number" : 23, 
                    "name": "Stripping Away",
                    "meaning" : "Stripping, flaying.",
                    "commentary" : "New World externally, Past World internally. The stylish is valued by the people over the classic.",
                    "trigram1" : "☶", 
                    "trigram2" : "☷"
                },
                {
                    "number" : 24, 
                    "name": "Return",
                    "meaning" : "Returning.",
                    "commentary" : "Past World externally, Future Actions internally. With care, strength can grow.",
                    "trigram1" : "☷", 
                    "trigram2" : "☳"
                },
                {
                    "number" : 25, 
                    "name": "Fidelity",
                    "meaning" : "Without rashness.",
                    "commentary" : "Past Thought externally, Future Action internally. If you are right, the people will follow.",
                    "trigram1" : "☰", 
                    "trigram2" : "☳"
                },
                {
                    "number" : 26, 
                    "name": "Great Buildup",
                    "meaning" : "Accumulating wisdom.",
                    "commentary" : "Future World externally, Past Thought internally. Opprotunities to learn.",
                    "trigram1" : "☶", 
                    "trigram2" : "☰"
                },
                {
                    "number" : 27, 
                    "name": "Nourishment",
                    "meaning" : "Seeking nourishment.",
                    "commentary" : "Future World externally, Future Action internally. The world supplies what you need.",
                    "trigram1" : "☶", 
                    "trigram2" : "☳"
                },
                {
                    "number" : 28, 
                    "name": "Predominance of the Great",
                    "meaning" : "Great surpassing.",
                    "commentary" : "Future Thought externally, Future Emotions internally. Exciting plans.",
                    "trigram1" : "☱", 
                    "trigram2" : "☴"
                },
                {
                    "number" : 29, 
                    "name": "Constant Pitfalls",
                    "meaning" : "Darkness. Gorge.",
                    "commentary" : "Past Emotions externally, Past Emotions internally. The ability to handle new problems is weak.",
                    "trigram1" : "☵", 
                    "trigram2" : "☵"
                },
                {
                    "number" : 30, 
                    "name": "Fire",
                    "meaning" : "Clinging. Attachment.",
                    "commentary" : "Past Actions externally, Past Actions internally. The fire still burns.",
                    "trigram1" : "☲", 
                    "trigram2" : "☲"
                },
                {
                    "number" : 31, 
                    "name": "Sensitivity",
                    "meaning" : "Attraction.",
                    "commentary" : "Future Thought externally, Future World internally. Take care and success follows.",
                    "trigram1" : "☱", 
                    "trigram2" : "☶"
                },
                {
                    "number" : 32, 
                    "name": "Persistance",
                    "meaning" : "Constancy.",
                    "commentary" : "Future Action externally, Future Emotions internally. Believe in what is being done.",
                    "trigram1" : "☳", 
                    "trigram2" : "☴"
                },
                {
                    "number" : 33, 
                    "name": "Withdrawal",
                    "meaning" : "Withdrawing.",
                    "commentary" : "Past Thought externally, Future World internally. Secrecy may be needed.",
                    "trigram1" : "☰", 
                    "trigram2" : "☶"
                },
                {
                    "number" : 34, 
                    "name": "The Power of Greatness",
                    "meaning" : "Great boldness.",
                    "commentary" : "Future Action externally, Past Thought internally. Calmness in a dynamic situation.",
                    "trigram1" : "☳", 
                    "trigram2" : "☰"
                },
                {
                    "number" : 35, 
                    "name": "Advance",
                    "meaning" : "Expansion, promotion.",
                    "commentary" : "Past Actions externally, Past World internally. Tried and true methods, tried and true results.",
                    "trigram1" : "☲", 
                    "trigram2" : "☷"
                },
                {
                    "number" : 36, 
                    "name": "Injury to the Enlightened",
                    "meaning" : "Brilliance injured.",
                    "commentary" : "Past World externally, Past Actions internally. In an environment that doesn't change, you must do the work yourself.",
                    "trigram1" : "☷", 
                    "trigram2" : "☲"
                },
                {
                    "number" : 37, 
                    "name": "People in the Home",
                    "meaning" : "Family.",
                    "commentary" : "Future Emotions externally, Past Actions internally. With an eye to the future, the family members carry out their duties.",
                    "trigram1" : "☴", 
                    "trigram2" : "☲"
                },
                {
                    "number" : 38, 
                    "name": "Opposition",
                    "meaning" : "Division, divergence.",
                    "commentary" : "Past Actions externally, Future Thoughts internally. This is opposition.",
                    "trigram1" : "☲", 
                    "trigram2" : "☱"
                },
                {
                    "number" : 39, 
                    "name": "Halting",
                    "meaning" : "Trouble, hardship.",
                    "commentary" : "Past emotions externally, Future World internally. The people do not embrace to new.",
                    "trigram1" : "☵", 
                    "trigram2" : "☶"
                },
                {
                    "number" : 40, 
                    "name": "Solution",
                    "meaning" : "Liberation, solution.",
                    "commentary" : "Future Action externally, Past Emotions internally. Doing something new to move beyond past feelings.",
                    "trigram1" : "☳", 
                    "trigram2" : "☵"
                },
                {
                    "number" : 41, 
                    "name": "Reduction",
                    "meaning" : "Decrease.",
                    "commentary" : "Future World externally, Future Thought internally. Reducing the old to build the new.",
                    "trigram1" : "☶", 
                    "trigram2" : "☱"
                },
                {
                    "number" : 42, 
                    "name": "Increase",
                    "meaning" : "Increase.",
                    "commentary" : "Future Emotions externally, Future Actions internally. The people support what you do.",
                    "trigram1" : "☴", 
                    "trigram2" : "☳"
                },
                {
                    "number" : 43, 
                    "name": "Decisiveness",
                    "meaning" : "Seperation.",
                    "commentary" : "Future Thought externally, Past Thought internally. Using limited information to navigate a new situation.",
                    "trigram1" : "☱", 
                    "trigram2" : "☰"
                },
                {
                    "number" : 44, 
                    "name": "Meeting",
                    "meaning" : "Encountering.",
                    "commentary" : "Past Thought externally, Future Emotions internally. Understand the other's intensions.",
                    "trigram1" : "☰", 
                    "trigram2" : "☴"
                },
                {
                    "number" : 45, 
                    "name": "Gathering",
                    "meaning" : "Association, companionship.",
                    "commentary" : "Future Thought externally, Past World internally. Listen and benefit.",
                    "trigram1" : "☱", 
                    "trigram2" : "☷"
                },
                {
                    "number" : 46, 
                    "name": "Rising",
                    "meaning" : "Growing upward.",
                    "commentary" : "Past World externally, Future Emotions internally. Opprotunity for growth.",
                    "trigram1" : "☷", 
                    "trigram2" : "☴"
                },
                {
                    "number" : 47, 
                    "name": "Exhaustion",
                    "meaning" : "Exhaustion.",
                    "commentary" : "Future Thoughts externally, Past Emotions internally. Holding on without support is exhausting.",
                    "trigram1" : "☱", 
                    "trigram2" : "☵"
                },
                {
                    "number" : 48, 
                    "name": "The Well",
                    "meaning" : "Replenishment, renewal.",
                    "commentary" : "Past Emotions externally, Future Emotions internally. Emotion alone may not be enough.",
                    "trigram1" : "☵", 
                    "trigram2" : "☴"
                },
                {
                    "number" : 49, 
                    "name": "Change",
                    "meaning" : "Abolishing the old.",
                    "commentary" : "Future Thought externally, Past Actions internally. The people want something you may not believe in.",
                    "trigram1" : "☱", 
                    "trigram2" : "☲"
                },
                {
                    "number" : 50, 
                    "name": "The Cauldron",
                    "meaning" : "Establishing the new.",
                    "commentary" : "Past Actions externally, Future Emotions internally. Opprotunity to inspire.",
                    "trigram1" : "☲", 
                    "trigram2" : "☴"
                },
                {
                    "number" : 51, 
                    "name": "Thunder",
                    "meaning" : "Mobilizing.",
                    "commentary" : "Future Action externally, Future Action internally. For those about to rock... We salute you!",
                    "trigram1" : "☳", 
                    "trigram2" : "☳"
                },
                {
                    "number" : 52, 
                    "name": "Mountains",
                    "meaning" : "Immobility.",
                    "commentary" : "Future World externally, Future World internally. The goal is fixed.",
                    "trigram1" : "☶", 
                    "trigram2" : "☶"
                },
                {
                    "number" : 53, 
                    "name": "Gradual Progress",
                    "meaning" : "Auspicious outlook, infiltration.",
                    "commentary" : "Future Emotions externally, Future World internally. The people help you reach your goal.",
                    "trigram1" : "☴", 
                    "trigram2" : "☶"
                },
                {
                    "number" : 54, 
                    "name": "A Young Woman Going to Marry",
                    "meaning" : "Marrying.",
                    "commentary" : "Future Action externally, Future Thought internally. Ensure your work is on a solid foundation.",
                    "trigram1" : "☳", 
                    "trigram2" : "☱"
                },
                {
                    "number" : 55, 
                    "name": "Abundance",
                    "meaning" : "Goalreach. Ambition achieved.",
                    "commentary" : "Future Action externally, Past Action internally. You have much to gain.",
                    "trigram1" : "☳", 
                    "trigram2" : "☲"
                },
                {
                    "number" : 56, 
                    "name": "Travel",
                    "meaning" : "Travel.",
                    "commentary" : "Past Actions externally, Future World internally. New vistas will open up.",
                    "trigram1" : "☲", 
                    "trigram2" : "☶"
                },
                {
                    "number" : 57, 
                    "name": "Conformity",
                    "meaning" : "Subtle influence.",
                    "commentary" : "Future Emotions externally, Future Emotions internally. This is conformity.",
                    "trigram1" : "☴", 
                    "trigram2" : "☴"
                },
                {
                    "number" : 58, 
                    "name": "Pleasing",
                    "meaning" : "Overt influence.",
                    "commentary" : "Future Thought externally, Future Thought internally. Agreement over the plan.",
                    "trigram1" : "☱", 
                    "trigram2" : "☱"
                },
                {
                    "number" : 59, 
                    "name": "Dispersal",
                    "meaning" : "Dispersal.",
                    "commentary" : "Future Emotions externally, Past Emotions internally. Emotional development.",
                    "trigram1" : "☴", 
                    "trigram2" : "☵"
                },
                {
                    "number" : 60, 
                    "name": "Regulation",
                    "meaning" : "Discipline.",
                    "commentary" : "Past Emotions externally, Future Thought internally. Using fairness, a new order is established.",
                    "trigram1" : "☵", 
                    "trigram2" : "☱"
                },
                {
                    "number" : 61, 
                    "name": "Truthfulness in the Center",
                    "meaning" : "Staying focused, avoiding misrepresentation.",
                    "commentary" : "Future Emotions externally, Future Thought internally. What people feel is a valid refelction on what's planned.",
                    "trigram1" : "☴", 
                    "trigram2" : "☱"
                },
                {
                    "number" : 62, 
                    "name": "Predominance of the Small",
                    "meaning" : "Small surpassing.",
                    "commentary" : "Future Action externally, Future World internally. New creations must start small.",
                    "trigram1" : "☳", 
                    "trigram2" : "☶"
                },
                {
                    "number" : 63, 
                    "name": "Already Accomplished",
                    "meaning" : "Completion.",
                    "commentary" : "Past Emotions externally, Past Actions internally. The people want the familiar, the familiar is given to them.",
                    "trigram1" : "☵", 
                    "trigram2" : "☲"
                },
                {
                    "number" : 64, 
                    "name": "Unfinished",
                    "meaning" : "Incomplete.",
                    "commentary" : "Past Actions externally, Past Emotions internally. Working on a trusted course of action.",
                    "trigram1" : "☲", 
                    "trigram2" : "☵"
                },
                {
                    "number" : 65, 
                    "name": "Influence",
                    "meaning" : "Influence.",
                    "commentary" : "Past Actions externally, Present Actions internally. Increase in social captital.",
                    "trigram1" : "☲", 
                    "trigram2" : "⚎"
                },
                {
                    "number" : 66, 
                    "name": "Virtue",
                    "meaning" : "Virtue.",
                    "commentary" : "Present Actions externally, Past Actions internally. Doing the right thing when others won't.",
                    "trigram1" : "⚎", 
                    "trigram2" : "☲"
                },
                {
                    "number" : 67, 
                    "name": "Individuality",
                    "meaning" : "Individuality.",
                    "commentary" : "Present Actions externally, Present Actions internally. Doing what you want.",
                    "trigram1" : "⚎", 
                    "trigram2" : "⚎"
                },
                {
                    "number" : 68, 
                    "name": "Valor",
                    "meaning" : "Valor.",
                    "commentary" : "Present Actions externally, Future Actions internally. Doing what's right, even when others do not agree.",
                    "trigram1" : "⚎", 
                    "trigram2" : "☳"
                },
                {
                    "number" : 69, 
                    "name": "Ambition",
                    "meaning" : "Ambition.",
                    "commentary" : "Future Actions externally, Present Actions internally. Follow others to reach your ambition.",
                    "trigram1" : "☳", 
                    "trigram2" : "⚎"
                },
                {
                    "number" : 70, 
                    "name": "Overpowering",
                    "meaning" : "Overpowering.",
                    "commentary" : "Past Actions externally, Present Emotions internally. Wanting your own path.",
                    "trigram1" : "☲", 
                    "trigram2" : "⚍"
                },
                {
                    "number" : 71, 
                    "name": "Good Fortune",
                    "meaning" : "Good Fortune.",
                    "commentary" : "Present Actions externally, Past Emotions internally. Events bring happiness.",
                    "trigram1" : "⚎", 
                    "trigram2" : "☵"
                },
                {
                    "number" : 72, 
                    "name": "Assertive",
                    "meaning" : "Assertive.",
                    "commentary" : "Present Actions externally, Present Emotions internally. In step with the moment.",
                    "trigram1" : "⚎", 
                    "trigram2" : "⚍"
                },
                {
                    "number" : 73, 
                    "name": "Instincts",
                    "meaning" : "Instincts.",
                    "commentary" : "Present Actions externally, Future Emotions internally. Operating intuitively for the future.",
                    "trigram1" : "⚎", 
                    "trigram2" : "☴"
                },
                {
                    "number" : 74, 
                    "name": "Passion",
                    "meaning" : "Passion.",
                    "commentary" : "Future Actions externally, Present Emotions internally. Caring for what you have.",
                    "trigram1" : "☳", 
                    "trigram2" : "⚍"
                },
                {
                    "number" : 75, 
                    "name": "Hesitation",
                    "meaning" : "Hesitation.",
                    "commentary" : "Past Actions externally, Present Thoughts internally. Hesitation in carrying out the plan.",
                    "trigram1" : "☲", 
                    "trigram2" : "⚌"
                },
                {
                    "number" : 76, 
                    "name": "Enchantment",
                    "meaning" : "Enchantment.",
                    "commentary" : "Present Actions externally, Past Thoughts internally. Enchantment with old ways prevents you from seeing new opprotunities.",
                    "trigram1" : "⚎", 
                    "trigram2" : "☰"
                },
                {
                    "number" : 77, 
                    "name": "Magnetism",
                    "meaning" : "Magnetism.",
                    "commentary" : "Present Actions externally, Present Thoughts internally. People carrying out your plan.",
                    "trigram1" : "⚎", 
                    "trigram2" : "⚌"
                },
                {
                    "number" : 78, 
                    "name": "Great Conviction",
                    "meaning" : "Conviction.",
                    "commentary" : "Present Actions externally, Future Thoughts internally. Belief in a new plan.",
                    "trigram1" : "⚎", 
                    "trigram2" : "☱"
                },
                {
                    "number" : 79, 
                    "name": "Glamour",
                    "meaning" : "Glamour.",
                    "commentary" : "Future Actions externally, Present Thoughts internally. The actions of others overwhelm you.",
                    "trigram1" : "☳", 
                    "trigram2" : "⚌"
                },
                {
                    "number" : 80, 
                    "name": "Prepare",
                    "meaning" : "Preparation.",
                    "commentary" : "Past Actions externally, Present World internally. Gather goods to prepare for the next step.",
                    "trigram1" : "☲", 
                    "trigram2" : "⚏"
                },
                {
                    "number" : 81, 
                    "name": "Growth",
                    "meaning" : "Growth.",
                    "commentary" : "Present Actions externally, Past World internally. Keeping in step brings growth.",
                    "trigram1" : "⚎", 
                    "trigram2" : "☷"
                },
                {
                    "number" : 82, 
                    "name": "Proficiency",
                    "meaning" : "Proficiency.",
                    "commentary" : "Present Actions externally, Present World internally. Working with familiar materials, performing familiar actions.",
                    "trigram1" : "⚎", 
                    "trigram2" : "⚏"
                },
                {
                    "number" : 83, 
                    "name": "Recognition",
                    "meaning" : "Recognition.",
                    "commentary" : "Present Actions externally, Future World internally. Recognition for one's good works.",
                    "trigram1" : "⚎", 
                    "trigram2" : "☶"
                },
                {
                    "number" : 84, 
                    "name": "Unfolding",
                    "meaning" : "Unfolding.",
                    "commentary" : "Future Actions externally, Present World internally. Development of one's material world.",
                    "trigram1" : "☳", 
                    "trigram2" : "⚏"
                },
                {
                    "number" : 85, 
                    "name": "Misconception",
                    "meaning" : "Misconception.",
                    "commentary" : "Past Emotions externally, Present Actions internally. The people do not understand what you're doing.",
                    "trigram1" : "☵", 
                    "trigram2" : "⚎"
                },
                {
                    "number" : 86, 
                    "name": "Tension",
                    "meaning" : "Tension.",
                    "commentary" : "Present Emotions externally, Past Actions internally. You are a bit behind the times with others.",
                    "trigram1" : "⚍", 
                    "trigram2" : "☲"
                },
                {
                    "number" : 87, 
                    "name": "Rectify",
                    "meaning" : "Rectify.",
                    "commentary" : "Present Emotions externally, Present Actions internally. Bringing your actions in line with people's feelings.",
                    "trigram1" : "⚍", 
                    "trigram2" : "⚎"
                },
                {
                    "number" : 88, 
                    "name": "Transform",
                    "meaning" : "Transform.",
                    "commentary" : "Present Emotions externally, Future Actions internally. Beginning the work of transforming people's emotions.",
                    "trigram1" : "⚍", 
                    "trigram2" : "☳"
                },
                {
                    "number" : 89, 
                    "name": "United",
                    "meaning" : "United.",
                    "commentary" : "Future Emotions externally, Present Actions internally. The sun and the moon are different, yet both follow the same laws.",
                    "trigram1" : "☴", 
                    "trigram2" : "⚎"
                },
                {
                    "number" : 90, 
                    "name": "Deception",
                    "meaning" : "Deception.",
                    "commentary" : "Past Emotions externally, Present Emotions internally. Things appear to be the same at first glance, but are not.",
                    "trigram1" : "☵", 
                    "trigram2" : "⚍"
                },
                {
                    "number" : 91, 
                    "name": "Competition",
                    "meaning" : "Competition.",
                    "commentary" : "Present Emotions externally, Past Emotions internally. A competition that you may not win.",
                    "trigram1" : "⚍", 
                    "trigram2" : "☵"
                },
                {
                    "number" : 92, 
                    "name": "Dedication",
                    "meaning" : "Dedication.",
                    "commentary" : "Present Emotions externally, Present Emotions internally. Dedication to what holds importance.",
                    "trigram1" : "⚍", 
                    "trigram2" : "⚍"
                },
                {
                    "number" :93, 
                    "name": "Good Sport",
                    "meaning" : "Good Sport.",
                    "commentary" : "Present Emotions externally, Future Emotions internally. Victory without gloating.",
                    "trigram1" : "⚍", 
                    "trigram2" : "☴"
                },
                {
                    "number" :94, 
                    "name": "Protect",
                    "meaning" : "Protect.",
                    "commentary" : "Future Emotions externally, Present Emotions internally. Protecting a loved one from uncertain influences.",
                    "trigram1" : "☴", 
                    "trigram2" : "⚍"
                },
                {
                    "number" :95, 
                    "name": "Scandal",
                    "meaning" : "Scandal.",
                    "commentary" : "Past Emotions externally, Present Thought internally. Scandalous actions of the past inhibit current plans.",
                    "trigram1" : "☵", 
                    "trigram2" : "⚌"
                },
                {
                    "number" :96, 
                    "name": "Uncertainty",
                    "meaning" : "Uncertainty.",
                    "commentary" : "Present Emotions externally, Past Thought internally. Uncertainty if the current plan can be carried out.",
                    "trigram1" : "⚍", 
                    "trigram2" : "☰"
                },
                {
                    "number" :97, 
                    "name": "Restoring",
                    "meaning" : "Restoring.",
                    "commentary" : "Present Emotions externally, Present Thought internally. Updating your thoughts to match the current emotional environment.",
                    "trigram1" : "⚍", 
                    "trigram2" : "⚌"
                },
                {
                    "number" :98, 
                    "name": "Instinct",
                    "meaning" : "Instinct.",
                    "commentary" : "Present Emotions externally, Future Thought internally. Plans for the immediate future are driven by the emotions of the environmenrt.",
                    "trigram1" : "⚍", 
                    "trigram2" : "☱"
                },
                {
                    "number" :99, 
                    "name": "Solemn",
                    "meaning" : "Solemn.",
                    "commentary" : "Future Emotions externally, Present Thought internally. Your plans, while viable, may seem too serious to others.",
                    "trigram1" : "☴", 
                    "trigram2" : "⚌"
                },
                {
                    "number" :100, 
                    "name": "Overindulgent",
                    "meaning" : "Overindulgent.",
                    "commentary" : "Past Emotions externally, Present World internally. The individual engages in a bit to much pleasure for the tastes of the people.",
                    "trigram1" : "☵", 
                    "trigram2" : "⚏"
                },
                {
                    "number" :101, 
                    "name": "Dispute",
                    "meaning" : "Dispute.",
                    "commentary" : "Present Emotions externally, Past World internally. There is resistance to your current outlook.",
                    "trigram1" : "⚍", 
                    "trigram2" : "☷"
                },
                {
                    "number" :102, 
                    "name": "Tradition",
                    "meaning" : "Tradition.",
                    "commentary" : "Present Emotions externally, Present World internally. Respect for the past.",
                    "trigram1" : "⚍", 
                    "trigram2" : "⚏"
                },
                {
                    "number" :103, 
                    "name": "Realism",
                    "meaning" : "Realism.",
                    "commentary" : "Present Emotions externally, Future World internally. Building the future requires a realistic approach.",
                    "trigram1" : "⚍", 
                    "trigram2" : "☶"
                },
                {
                    "number" :104, 
                    "name": "Acceptance",
                    "meaning" : "Acceptance.",
                    "commentary" : "Future Emotions externally, Present World internally. Accepting that the world is about to change.",
                    "trigram1" : "☴", 
                    "trigram2" : "⚏"
                },
                {
                    "number" :105, 
                    "name": "Interest",
                    "meaning" : "Interest.",
                    "commentary" : "Past Thought externally, Present Actions internally. There is interest in your plans.",
                    "trigram1" : "☰", 
                    "trigram2" : "⚎"
                },
                {
                    "number" :106, 
                    "name": "Listless",
                    "meaning" : "Listless.",
                    "commentary" : "Present Thought externally, Past Actions internally. Disinterest in the plans of the world.",
                    "trigram1" : "⚌", 
                    "trigram2" : "☲"
                },
                {
                    "number" :107, 
                    "name": "Performance",
                    "meaning" : "Performance.",
                    "commentary" : "Present Thought externally, Present Actions internally. You make a display of your actions, which are acceptable to the people.",
                    "trigram1" : "⚌", 
                    "trigram2" : "⚎"
                },
                {
                    "number" :108, 
                    "name": "Excitement",
                    "meaning" : "Excitement.",
                    "commentary" : "Present Thought externally, Future Actions internally. Your excitement leads you on a new course of action.",
                    "trigram1" : "⚌", 
                    "trigram2" : "☳"
                },
                {
                    "number" :109, 
                    "name": "Praise",
                    "meaning" : "Praise.",
                    "commentary" : "Future Thought externally, Present Actions internally. The people want to see more of your work.",
                    "trigram1" : "☱", 
                    "trigram2" : "⚎"
                },
                {
                    "number" :110, 
                    "name": "Intrigue",
                    "meaning" : "Intrigue.",
                    "commentary" : "Past Thought externally, Present Emotions internally. Secretly wanting your own goals.",
                    "trigram1" : "☰", 
                    "trigram2" : "⚍"
                },
                {
                    "number" :111,
                    "name": "Despondent",
                    "meaning" : "Despondent.",
                    "commentary" : "Present Thought externally, Past Emotions internally. Others have forgotten the thing you care about.",
                    "trigram1" : "⚌", 
                    "trigram2" : "☵"
                },
                {
                    "number" :112,
                    "name": "Storm",
                    "meaning" : "Emotional storm.",
                    "commentary" : "Present Thought externally, Present Emotions internally. A powerful burst of emotions.",
                    "trigram1" : "⚌", 
                    "trigram2" : "⚍"
                },
                {
                    "number" :113,
                    "name": "Dissipate",
                    "meaning" : "Dissipate.",
                    "commentary" : "Present Thought externally, Future Emotions internally. With strong feelings regarding the future, you move beyond the current plan.",
                    "trigram1" : "⚌", 
                    "trigram2" : "☴"
                },
                {
                    "number" :114,
                    "name": "Dauntless",
                    "meaning" : "Dauntless.",
                    "commentary" : "Future Thought externally, Present Emotions internally. Carrying on with what you believe in despite new fashions.",
                    "trigram1" : "☱", 
                    "trigram2" : "⚍"
                },
                {
                    "number" :115,
                    "name": "Mastering",
                    "meaning" : "Mastering.",
                    "commentary" : "Past Thought externally, Present Thought internally. Developing skills.",
                    "trigram1" : "☰", 
                    "trigram2" : "⚌"
                },
                {
                    "number" :116,
                    "name": "Superfluous",
                    "meaning" : "Superfluous.",
                    "commentary" : "Present Thought externally, Past Thought internally. Unneeded skills.",
                    "trigram1" : "⚌", 
                    "trigram2" : "☰"
                },
                {
                    "number" :117,
                    "name": "Man",
                    "meaning" : "Mankind.",
                    "commentary" : "Present Thought externally, Present Thought internally. Man being Man.",
                    "trigram1" : "⚌", 
                    "trigram2" : "⚌"
                },
                {
                    "number" :118,
                    "name": "Refinement",
                    "meaning" : "Refinement.",
                    "commentary" : "Present Thought externally, Future Thought internally. Developing new skills.",
                    "trigram1" : "⚌", 
                    "trigram2" : "☱"
                },
                {
                    "number" :119,
                    "name": "Innovation",
                    "meaning" : "Innovation.",
                    "commentary" : "Present Thought externally, Future Thought internally. New skills to be learned.",
                    "trigram1" : "☱", 
                    "trigram2" : "⚌"
                },
                {
                    "number" :120,
                    "name": "Aversion",
                    "meaning" : "Aversion.",
                    "commentary" : "Past Thought externally, Present World internally. Avoiding those with outdated views.",
                    "trigram1" : "☰", 
                    "trigram2" : "⚏"
                },
                {
                    "number" :121,
                    "name": "Awkwardness",
                    "meaning" : "Awkwardness.",
                    "commentary" : "Present Thought externally, Past World internally. Outdated modes of conduct. Unskilled interaction.",
                    "trigram1" : "⚌", 
                    "trigram2" : "☷"
                },
                {
                    "number" :122,
                    "name": "Obligation",
                    "meaning" : "Obligation.",
                    "commentary" : "Present Thought externally, Present World internally. Taking care of responsibilities.",
                    "trigram1" : "⚌", 
                    "trigram2" : "⚏"
                },
                {
                    "number" :123,
                    "name": "Friendship",
                    "meaning" : "Friendship.",
                    "commentary" : "Present Thought externally, Future World internally. Seeing the value in someone.",
                    "trigram1" : "⚌", 
                    "trigram2" : "☶"
                },
                {
                    "number" :124,
                    "name": "Appreciation",
                    "meaning" : "Appreciation.",
                    "commentary" : "Future Thought externally, Present World internally. Thankful for good advice.",
                    "trigram1" : "☱", 
                    "trigram2" : "⚏"
                },
                {
                    "number" :125,
                    "name": "Assuage",
                    "meaning" : "Assuage.",
                    "commentary" : "Past World externally, Present Actions internally. Recovering from past damage.",
                    "trigram1" : "☷", 
                    "trigram2" : "⚎"
                },
                {
                    "number" :126,
                    "name": "Endurance",
                    "meaning" : "Endurance.",
                    "commentary" : "Present World externally, Past Actions internally. Continuing on.",
                    "trigram1" : "⚏", 
                    "trigram2" : "☲"
                },
                {
                    "number" :127,
                    "name": "Contentment",
                    "meaning" : "Contentment.",
                    "commentary" : "Present World externally, Present Actions internally. Happy with things as they are.",
                    "trigram1" : "⚏", 
                    "trigram2" : "⚎"
                },
                {
                    "number" :128,
                    "name": "Devotion",
                    "meaning" : "Devotion.",
                    "commentary" : "Present World externally, Future Actions internally. Content with what you have, you work toward the future.",
                    "trigram1" : "⚏", 
                    "trigram2" : "☳"
                },
                {
                    "number" :129,
                    "name": "Maintaining",
                    "meaning" : "Maintaining.",
                    "commentary" : "Future World externally, Present Actions internally. Despite new developments by others, you continue doing what you've been doing.",
                    "trigram1" : "☶", 
                    "trigram2" : "⚎"
                },
                {
                    "number" :130,
                    "name": "Penetration",
                    "meaning" : "Penetration.",
                    "commentary" : "Past World externally, Present Emotions internally. Pushing through with no resistance.",
                    "trigram1" : "☷", 
                    "trigram2" : "⚍"
                },
                {
                    "number" :131,
                    "name": "Peace",
                    "meaning" : "Peace.",
                    "commentary" : "Present World externally, Past Emotions internally. No worries or work, just peace.",
                    "trigram1" : "⚏", 
                    "trigram2" : "☵"
                },
                {
                    "number" :132,
                    "name": "Strength",
                    "meaning" : "Strength.",
                    "commentary" : "Present World externally, Present Emotions internally. Being in tune with the world brings strength.",
                    "trigram1" : "⚏", 
                    "trigram2" : "⚍"
                },
                {
                    "number" :133,
                    "name": "Insight",
                    "meaning" : "Insight.",
                    "commentary" : "Present World externally, Future Emotions internally. Insight into what's to come.",
                    "trigram1" : "⚏", 
                    "trigram2" : "☴"
                },
                {
                    "number" :134,
                    "name": "Domination",
                    "meaning" : "Domination.",
                    "commentary" : "Future World externally, Present Emotions internally. Preventing growth using emotional domination.",
                    "trigram1" : "☶", 
                    "trigram2" : "⚍"
                },
                {
                    "number" :135,
                    "name": "Cultivation",
                    "meaning" : "Cultivation.",
                    "commentary" : "Past World externally, Present Thought internally. Refining the present using the past.",
                    "trigram1" : "☷", 
                    "trigram2" : "⚌"
                },
                {
                    "number" :136,
                    "name": "Stimulation",
                    "meaning" : "Stimulation.",
                    "commentary" : "Present World externally, Past Thought internally. Updating your beliefs based on current developments.",
                    "trigram1" : "⚏", 
                    "trigram2" : "☰"
                },
                {
                    "number" :137,
                    "name": "Evaluation",
                    "meaning" : "Evaluation.",
                    "commentary" : "Present World externally, Present Thought internally. Evaluating current accomplishments.",
                    "trigram1" : "⚏", 
                    "trigram2" : "⚌"
                },
                {
                    "number" :138,
                    "name": "Judgement",
                    "meaning" : "Judgement.",
                    "commentary" : "Present World externally, Future Thought internally. Judging current accomplishments.",
                    "trigram1" : "⚏", 
                    "trigram2" : "☱"
                },
                {
                    "number" :139,
                    "name": "Consummation",
                    "meaning" : "Consummation.",
                    "commentary" : "Future World externally, Present Thought internally. Beginning a new world.",
                    "trigram1" : "☶", 
                    "trigram2" : "⚌"
                },
                {
                    "number" :140,
                    "name": "Clear Heart",
                    "meaning" : "Clear Heart.",
                    "commentary" : "Past World externally, Present World internally. Honorable work continues.",
                    "trigram1" : "☷", 
                    "trigram2" : "⚏"
                },
                {
                    "number" :141,
                    "name": "Rest",
                    "meaning" : "Rest.",
                    "commentary" : "Present World externally, Past World internally. Resting from labors.",
                    "trigram1" : "⚏", 
                    "trigram2" : "☷"
                },
                {
                    "number" :142,
                    "name": "Determination",
                    "meaning" : "Determination.",
                    "commentary" : "Present World externally, Present World internally. All are doing the work.",
                    "trigram1" : "⚏", 
                    "trigram2" : "⚏"
                },
                {
                    "number" :143,
                    "name": "Work",
                    "meaning" : "Work.",
                    "commentary" : "Present World externally, Future World internally. Building the future.",
                    "trigram1" : "⚏", 
                    "trigram2" : "☶"
                },
                {
                    "number" :144,
                    "name": "Achievement",
                    "meaning" : "Achievement.",
                    "commentary" : "Future World externally, Present World internally. Current work is complete and a foundation is laid for the future.",
                    "trigram1" : "☶", 
                    "trigram2" : "⚏"
                }
/*

                    "symbol" : "⚎",
                    "zodiac" : "♌︎"
                },
                {
                    "symbol" : "⚍",
                    "zodiac" : "♏︎"
                },
                {
                    "symbol" : "⚌",
                    "zodiac" : "♒︎"
                },
                {
                    "symbol" : "⚏",
                    "zodiac" : "♉︎"
                }
                    "symbol" : "☰",
                    "zodiac" : "♊︎"
                },
                {
                    "symbol" : "☱",
                    "zodiac" : "♎︎"
                },
                {
                    "symbol" : "☲",
                    "zodiac" : "♐︎"
                },
                {
                    "symbol" : "☳",
                    "zodiac" : "♈︎"
                },
                {
                    "symbol" : "☴",
                    "zodiac" : "♋︎"
                },
                {
                    "symbol" : "☵",
                    "zodiac" : "♓︎"
                },
                {
                    "symbol" : "☶",
                    "zodiac" : "♑︎"
                },
                {
                    "symbol" : "☷",
                    "zodiac" : "♍︎"
            */            
           ]
        }
        </script>  
    </head>
    <body onload="set_menu(0); build_symbol_index()" style="font-family: 'Arial Narrow', Arial, sans-serif;">
    <div id="MenuBar" style="display: flex; flex-direction: row; gap: 20px; width: 100%; height: 25px; border-bottom: 3px solid black;">
        <div id="MenuBarRandomOverTime" style="height: 25px; padding: 0px 5px 0px 5px; cursor: pointer;" onclick="set_menu(0)">Random Over Time</div>
        <div id="MenuBarLoShu" style="height: 25px; padding: 0px 5px 0px 5px; cursor: pointer;" onclick="set_menu(1)">Lo Shu</div>
        <div id="MenuBarOctacrossAndTarot" style="height: 25px; padding: 0px 5px 0px 5px; cursor: pointer;" onclick="set_menu(2)">Octacross And Tarot</div>
        <div id="MenuBarRightNow" style="height: 25px; padding: 0px 5px 0px 5px; cursor: pointer;" onclick="set_menu(3)">Right Now</div>
        <div id="MenuBarList" style="height: 25px; padding: 0px 5px 0px 5px; cursor: pointer;" onclick="set_menu(4)">List</div>
        <div id="MenuBarDocs" style="height: 25px; padding: 0px 5px 0px 5px; cursor: pointer;" onclick="set_menu(5)">Documentation</div>
    </div>
    <div id="ListContent" style="display: flex; flex-direction: row; width: 100%; height: 100%;">
        <div id="SymbolIndexes" style="display: flex; flex-direction: column; width: 230px; height: 100%; position: fixed; top: 39px; bottom: 0; overflow-y: auto;"></div>
        <div id="SymbolData" style="display: flex; flex-direction: column; width: 100%; position: fixed; left: 250px;">
            <div id="SymbolTitle" style="font-size: 2em; font-weight: bold;"></div>
            <div style="display: flex; flex-direction: row;">
                <div id="SymbolTrigram1" style="font-size: 1em; font-weight: bold; padding: 0px 0px 0px 0px;">☰</div>
                <div id="SymbolTrigram2" style="font-size: 1em;  font-weight: bold; padding: 0px 10px 0px 0px;">☰</div>
                <div id="SymbolZodiac1" style="font-size: 1em; font-weight: bold; padding: 0px 2px 0px 0px;">♊︎</div>
                <div id="SymbolZodiac2" style="font-size: 1em; font-weight: bold; padding: 0px 2px 0px 0px;">♊︎</div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div id="ExternalEnergy" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">External</div>
                <div id="ExternalTrigram" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
                <div id="ExternalZodiac" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div id="ExternalDomicileTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">External Domicile</div>
                <div id="ExternalDomicile" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="ExternalExaltedTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Exalted</div>
                <div id="ExternalExalted" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="ExternalDetrimentTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Detriment</div>
                <div id="ExternalDetriment" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="ExternalFallTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Fall</div>
                <div id="ExternalFall" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div id="InternalEnergy" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Internal</div>
                <div id="InternalTrigram" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
                <div id="InternalZodiac" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div id="InternalDomicileTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Internal Domicile</div>
                <div id="InternalDomicile" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="InternalExaltedTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Exalted</div>
                <div id="InternalExalted" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="InternalDetrimentTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Detriment</div>
                <div id="InternalDetriment" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="InternalFallTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Fall</div>
                <div id="InternalFall" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div id="SymbolMeaning" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Meaning</div>
                <div id="Meaning" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
            </div>
            <div style="font-size: 1em; font-weight: bold; padding: 10px 0px 0px 0px;">
                Commentary
            </div>
            <div id="Commentary" style="font-size: 1em; font-family: 'Times New Roman', Times, serif; padding: 10px 0px 0px 0px; width: 70%;">
                TEXT
            </div>
        </div>
    </div>
    <div id="RandomContent" style="display: flex; flex-direction: row; width: 100%; height: 100%;">
        <div id="RandomSymbolData" style="display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%;">
            <div id="RandomSymbolTitle" style="font-size: 2em; font-weight: bold;"></div>
            <div style="display: flex; flex-direction: row;">
                <div id="RandomSymbolTrigram1" style="font-size: 4em; font-weight: bold; padding: 0px 0px 0px 0px;">☰</div>
                <div id="RandomSymbolTrigram2" style="font-size: 4em;  font-weight: bold; padding: 0px 10px 0px 0px;">☰</div>
                <div id="RandomSymbolZodiac1" style="font-size: 4em; font-weight: bold; padding: 0px 2px 0px 0px;">♊︎</div>
                <div id="RandomSymbolZodiac2" style="font-size: 4em; font-weight: bold; padding: 0px 2px 0px 0px;">♊︎</div>
            </div>
            <div style="display: flex; flex-direction: row; justify-content: flex-start;">
                <div id="RandomExternalEnergy" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">External</div>
                <div id="RandomExternalTrigram" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
                <div id="RandomExternalZodiac" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row; justify-content: flex-start;">
                <div id="RandomExternalDomicileTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">External Domicile</div>
                <div id="RandomExternalDomicile" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RandomExternalExaltedTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Exalted</div>
                <div id="RandomExternalExalted" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RandomExternalDetrimentTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Detriment</div>
                <div id="RandomExternalDetriment" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RandomExternalFallTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Fall</div>
                <div id="RandomExternalFall" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row; justify-content: flex-start;">
                <div id="RandomInternalEnergy" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Internal</div>
                <div id="RandomInternalTrigram" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
                <div id="RandomInternalZodiac" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row; justify-content: flex-start;">
                <div id="RandomInternalDomicileTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Internal Domicile</div>
                <div id="RandomInternalDomicile" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RandomInternalExaltedTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Exalted</div>
                <div id="RandomInternalExalted" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RandomInternalDetrimentTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Detriment</div>
                <div id="RandomInternalDetriment" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RandomInternalFallTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Fall</div>
                <div id="RandomInternalFall" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row; justify-content: flex-start;">
                <div id="RandomSymbolMeaning" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Meaning</div>
                <div id="RandomMeaning" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
            </div>
            <div style="font-size: 1em; font-weight: bold; padding: 10px 0px 0px 0px;">
                Commentary
            </div>
            <div id="RandomCommentary" style="font-size: 1em; font-family: 'Times New Roman', Times, serif; padding: 10px 0px 0px 0px; width: 100%; text-align: center;">
                TEXT
            </div>
        </div>
    </div>
    <div id="LoShuContent" style="display: none; flex-direction: row; width: 100%; height: 100%; overflow-y: scroll;">
        <div style="display: flex; flex-direction: column; width: 5em; height: 100%; position: fixed; top: 39px; bottom: 0; overflow-y: auto;">
            <div id="LoShuElementFire" style="width: 1.5em; height: 1.5em; margin: 2px; font-size: 3em; text-align: center; vertical-align: middle; cursor: pointer;" onclick="set_lo_shu_element(0);">🜂</div> 
            <div id="LoShuElementWater" style="width: 1.5em; height: 1.5em; margin: 2px; font-size: 3em; text-align: center; vertical-align: middle; cursor: pointer;" onclick="set_lo_shu_element(1);">🜄</div> 
            <div id="LoShuElementAir" style="width: 1.5em; height: 1.5em; margin: 2px; font-size: 3em; text-align: center; vertical-align: middle; cursor: pointer;" onclick="set_lo_shu_element(2);">🜁</div> 
            <div id="LoShuElementEarth" style="width: 1.5em; height: 1.5em; margin: 2px; font-size: 3em; text-align: center; vertical-align: middle; cursor: pointer;" onclick="set_lo_shu_element(3);">🜃</div> 
        </div>
        <div id="LoShu" style="font-size: 1em; font-family: 'Times New Roman', Times, serif; padding: 10px 0px 0px 5px; position: fixed; left: 5.5em; width: 100%; height: 100%; border: 1px solid black; overflow-y: scroll;">
            <table style="font-family: 'Arial Narrow', Arial, sans-serif;">
                <tr>
                    <th style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">↓Internal↓</th>
                    <th id="PastExternalHeader" style="width: 10em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Past</th>
                    <th id="PresentExternalHeader" style="width: 10em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Present</th>
                    <th id="FutureExternalHeader" style="width: 10em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Future</th>
                </tr>
                <tr>
                    <th id="FirePastInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Past Fire</th>
                    <td id="FirePastPastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('FirePastPastData')"></td>
                    <td id="FirePresentPastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('FirePresentPastData')"></td>
                    <td id="FireFuturePastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('FireFuturePastData')"></td>
                </tr>
                <tr>
                    <th id="FirePresentInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Present Fire</th>
                    <td id="FirePastPresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('FirePastPresentData')"></td>
                    <td id="FirePresentPresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('FirePresentPresentData')"></td>
                    <td id="FireFuturePresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('FireFuturePresentData')"></td>
                </tr>
                <tr>
                    <th id="FireFutureInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Future Fire</th>
                    <td id="FirePastFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('FirePastFutureData')"></td>
                    <td id="FirePresentFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('FirePresentFutureData')"></td>
                    <td id="FireFutureFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('FireFutureFutureData')"></td>
                </tr>
            </table>
            <table style="font-family: 'Arial Narrow', Arial, sans-serif; margin: 5px 0px 0px 0px;">
                <tr>
                    <th id="WaterPastInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Past Water</th>
                    <td id="WaterPastPastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('WaterPastPastData')"></td>
                    <td id="WaterPresentPastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('WaterPresentPastData')"></td>
                    <td id="WaterFuturePastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('WaterFuturePastData')"></td>
                </tr>
                <tr>
                    <th id="WaterPresentInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Present Water</th>
                    <td id="WaterPastPresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('WaterPastPresentData')"></td>
                    <td id="WaterPresentPresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('WaterPresentPresentData')"></td>
                    <td id="WaterFuturePresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('WaterFuturePresentData')"></td>
                </tr>
                <tr>
                    <th id="WaterFutureInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Future Water</th>
                    <td id="WaterPastFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('WaterPastFutureData')"></td>
                    <td id="WaterPresentFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('WaterPresentFutureData')"></td>
                    <td id="WaterFutureFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('WaterFutureFutureData')"></td>
                </tr>
            </table>
            <table style="font-family: 'Arial Narrow', Arial, sans-serif; margin: 5px 0px 0px 0px;">
                <tr>
                    <th id="AirPastInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Past Air</th>
                    <td id="AirPastPastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('AirPastPastData')"></td>
                    <td id="AirPresentPastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('AirPresentPastData')"></td>
                    <td id="AirFuturePastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('AirFuturePastData')"></td>
                </tr>
                <tr>
                    <th id="AirPresentInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Present Air</th>
                    <td id="AirPastPresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('AirPastPresentData')"></td>
                    <td id="AirPresentPresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('AirPresentPresentData')"></td>
                    <td id="AirFuturePresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('AirFuturePresentData')"></td>
                </tr>
                <tr>
                    <th id="AirFutureInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Future Air</th>
                    <td id="AirPastFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('AirPastFutureData')"></td>
                    <td id="AirPresentFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('AirPresentFutureData')"></td>
                    <td id="AirFutureFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('AirFutureFutureData')"></td>
                </tr>
            </table>
            <table style="font-family: 'Arial Narrow', Arial, sans-serif; margin: 5px 0px 0px 0px;">
                <tr>
                    <th id="EarthPastInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Past Earth</th>
                    <td id="EarthPastPastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('EarthPastPastData')"></td>
                    <td id="EarthPresentPastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('EarthPresentPastData')"></td>
                    <td id="EarthFuturePastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('EarthFuturePastData')"></td>
                </tr>
                <tr>
                    <th id="EarthPresentInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Present Earth</th>
                    <td id="EarthPastPresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('EarthPastPresentData')"></td>
                    <td id="EarthPresentPresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('EarthPresentPresentData')"></td>
                    <td id="EarthFuturePresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('EarthFuturePresentData')"></td>
                </tr>
                <tr>
                    <th id="EarthFutureInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Future Earth</th>
                    <td id="EarthPastFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('EarthPastFutureData')"></td>
                    <td id="EarthPresentFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('EarthPresentFutureData')"></td>
                    <td id="EarthFutureFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: pointer;" onclick="select_lo_shu_hexagram('EarthFutureFutureData')"></td>
                </tr>
            </table>
            <div id="LoShuSymbolData" style="display: flex; flex-direction: column; width: 100%; height: 100%; font-family: 'Arial Narrow', Arial, sans-serif; overflow-y: scroll;">
                <div id="LoShuSymbolTitle" style="font-size: 2em; font-weight: bold;">TITLE</div>
                <div style="display: flex; flex-direction: row;">
                    <div id="LoShuSymbolTrigram1" style="font-size: 1em; font-weight: bold; padding: 0px 0px 0px 0px;"></div>
                    <div id="LoShuSymbolTrigram2" style="font-size: 1em;  font-weight: bold; padding: 0px 10px 0px 0px;"></div>
                    <div id="LoShuSymbolZodiac1" style="font-size: 1em; font-weight: bold; padding: 0px 2px 0px 0px;">♊︎</div>
                    <div id="LoShuSymbolZodiac2" style="font-size: 1em; font-weight: bold; padding: 0px 2px 0px 0px;">♊︎</div>
                </div>
                <div style="display: flex; flex-direction: row;">
                    <div id="LoShuExternalEnergy" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">External</div>
                    <div id="LoShuExternalTrigram" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
                    <div id="LoShuExternalZodiac" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                </div>
                <div style="display: flex; flex-direction: row;">
                    <div id="LoShuExternalDomicileTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">External Domicile</div>
                    <div id="LoShuExternalDomicile" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                    <div id="LoShuExternalExaltedTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Exalted</div>
                    <div id="LoShuExternalExalted" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                    <div id="LoShuExternalDetrimentTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Detriment</div>
                    <div id="LoShuExternalDetriment" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                    <div id="LoShuExternalFallTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Fall</div>
                    <div id="LoShuExternalFall" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                </div>
                <div style="display: flex; flex-direction: row;">
                    <div id="LoShuInternalEnergy" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Internal</div>
                    <div id="LoShuInternalTrigram" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
                    <div id="LoShuInternalZodiac" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                </div>
                <div style="display: flex; flex-direction: row;">
                    <div id="LoShuInternalDomicileTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Internal Domicile</div>
                    <div id="LoShuInternalDomicile" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                    <div id="LoShuInternalExaltedTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Exalted</div>
                    <div id="LoShuInternalExalted" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                    <div id="LoShuInternalDetrimentTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Detriment</div>
                    <div id="LoShuInternalDetriment" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                    <div id="LoShuInternalFallTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Fall</div>
                    <div id="LoShuInternalFall" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                </div>
                <div style="display: flex; flex-direction: row;">
                    <div id="LoShuSymbolMeaning" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Meaning</div>
                    <div id="LoShuMeaning" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
                </div>
                <div style="font-size: 1em; font-weight: bold; padding: 10px 0px 0px 0px;">
                    Commentary
                </div>
                <div id="LoShuCommentary" style="font-size: 1em; font-family: 'Times New Roman', Times, serif; padding: 10px 0px 0px 0px; width: 70%; height: 100%;">
                    TEXT
                </div>
            </div>    
        </div>
    </div>
    <div id="RightNowContent" style="display: none; flex-direction: column; width: 100%; height: 100%; overflow-y: scroll;">
        <div>Calculate the hexagram corresponding to your location and time. 
            The external trigram is derived from the sun sign for today.
            The internal trigram is derived from the current rising sign at your location.
            The resulting hexagram will change every two hours.
        </div>
        <button type="button" style="width: 100px;" onclick="calculateRightNow()">Calculate</button>
        <div id="RightNowCalculating" style="display: none;">Calculating.</div>
        <div id="RightNowHexagram" style="display: none;">
            <div id="RightNowSymbolTitle" style="font-size: 2em; font-weight: bold;"></div>
            <div style="display: flex; flex-direction: row;">
                <div id="RightNowSymbolTrigram1" style="font-size: 1em; font-weight: bold; padding: 0px 0px 0px 0px;">☰</div>
                <div id="RightNowSymbolTrigram2" style="font-size: 1em;  font-weight: bold; padding: 0px 10px 0px 0px;">☰</div>
                <div id="RightNowSymbolZodiac1" style="font-size: 1em; font-weight: bold; padding: 0px 2px 0px 0px;">♊︎</div>
                <div id="RightNowSymbolZodiac2" style="font-size: 1em; font-weight: bold; padding: 0px 2px 0px 0px;">♊︎</div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div id="RightNowExternalEnergy" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">External</div>
                <div id="RightNowExternalTrigram" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
                <div id="RightNowExternalZodiac" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div id="RightNowExternalDomicileTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">External Domicile</div>
                <div id="RightNowExternalDomicile" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RightNowExternalExaltedTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Exalted</div>
                <div id="RightNowExternalExalted" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RightNowExternalDetrimentTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Detriment</div>
                <div id="RightNowExternalDetriment" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RightNowExternalFallTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Fall</div>
                <div id="RightNowExternalFall" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div id="RightNowInternalEnergy" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Internal</div>
                <div id="RightNowInternalTrigram" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
                <div id="RightNowInternalZodiac" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div id="RightNowInternalDomicileTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Internal Domicile</div>
                <div id="RightNowInternalDomicile" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RightNowInternalExaltedTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Exalted</div>
                <div id="RightNowInternalExalted" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RightNowInternalDetrimentTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Detriment</div>
                <div id="RightNowInternalDetriment" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
                <div id="RightNowInternalFallTitle" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 5px;"> Fall</div>
                <div id="RightNowInternalFall" style="font-size: 1em; padding: 0px 2px 0px 0px;"></div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div id="RightNowSymbolMeaning" style="font-size: 1em; font-weight: bold; padding: 0px 5px 0px 0px;">Meaning</div>
                <div id="RightNowMeaning" style="font-size: 1em; padding: 0px 10px 0px 0px;"></div>
            </div>
            <div style="font-size: 1em; font-weight: bold; padding: 10px 0px 0px 0px;">
                Commentary
            </div>
            <div id="RightNowCommentary" style="font-size: 1em; font-family: 'Times New Roman', Times, serif; padding: 10px 0px 0px 0px; width: 70%;">
                TEXT
            </div>
        </div>
    </div>
    <div id="OctacrossContent" style="display: none; flex-direction: column; width: 100%; height: 100%; overflow-y: scroll;">
        <input type="button" style="font-size: 1.5em; position: absolute; left: 305px; top: 70px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜂🜂')" value="🜂🜂"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 395px; top: 87px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜂🜁')" value="🜂🜁"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 530px; top: 164px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜂🜄')" value="🜂🜄"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 578px; top: 240px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜂🜃')" value="🜂🜃"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 305px; top: 600px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜄🜄')" value="🜄🜄"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 215px; top: 583px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜄🜃')" value="🜄🜃"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 76px; top: 503px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜄🜂')" value="🜄🜂"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 32px; top: 430px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜄🜁')" value="🜄🜁"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 598px; top: 335px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜁🜁')" value="🜁🜁"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 578px; top: 430px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜁🜄')" value="🜁🜄"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 530px; top: 503px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜁🜃')" value="🜁🜃"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 395px; top: 583px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜁🜂')" value="🜁🜂"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 15px; top: 335px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜃🜃')" value="🜃🜃"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 32px; top: 240px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜃🜂')" value="🜃🜂"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 76px; top: 164px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜃🜁')" value="🜃🜁"></input>
        <input type="button" style="font-size: 1.5em; position: absolute; left: 215px; top: 87px; width: 90px; height: 1.25em; z-index: 10;"onclick="alert('🜃🜄')" value="🜃🜄"></input>
        <div id="OctacrossPaper" style="position: absolute; left: 50px; top: 50px; width: 600px; height:600px;"></div>
    </div>
    <div id="DocsContent" style="display: none; flex-direction: column; width: 100%; height: 100%; overflow-y: scroll;">
        <div>Welcome to the Zodiac I Ching. I hope you enjoy the app and these docs will help you get the most out of it.</div>
        <div style="font-size: 1.5em; font-weight: bold; margin: 20px 0px 0px 0px;">How it Works</div>
        <div>The I Ching consists of 64 hexagrams, each of which is made from two trigrams. There are eight trigrams in total and it's these 8 * 8 = 64 combinations that give us the 64 hexagrams. 
            On the other hand, the Western zodiac consists of 12 signs, eight of which closely match the eight trigrams.
            The remaing four zodiac signs are used to create an additional 80 combinations, bringing the total number of symbols in the Zodiac I Ching to 144.
        </div>
        <div style="font-size: 1.5em; font-weight: bold; margin: 20px 0px 0px 0px;">Correspondences</div>
        <div>The mapping of the trigrams and zodiac is summarized in the table below.
        </div>
        <table style="font-family: 'Arial Narrow', Arial, sans-serif; margin: 20px 0px 0px 0px;">
            <tr>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Trigram</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Zodiac</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Trigram</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">Zodiac</th>
            </tr>
            <tr>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">☰ Heaven</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♊︎ Gemini</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">☱ Lake</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♎︎ Libra</th>
            </tr>
            <tr>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">☲ Fire</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♐︎ Sagittarius</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">☳ Thunder</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♈︎ Aries</th>
            </tr>
            <tr>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">☴ Wind</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♋︎ Cancer</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">☵ Water</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♓︎ Pisces</th>
            </tr>
            <tr>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">☶ Mountain</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♑︎ Capricorn</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">☷ Earth</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♍︎ Virgo</th>
            </tr>
            <tr>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">⚎ Lesser Yang</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♌︎ Leo</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">⚌ Greater Yang</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♒︎ Aquarius</th>
            </tr>
            <tr>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">⚍ Lesser Yin</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♏︎ Scorpio</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">⚏ Greater Yin</th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">♉︎ Taurus</th>
            </tr>
        </table>
        <div style="font-size: 1.5em; font-weight: bold; margin: 20px 0px 0px 0px;">Interpretation</div>
        <div style="display: flex; flex-direction: row;">
            <div style="display: flex; flex-direction: column; border: 1px solid black; padding: 0px 0px 0px 5px; margin: 0px 5px 0px 0px;">
                <div style="width: 6em;">☰ External</div>
                <div style="width: 6em;">☱ Internal</div>
            </div>
            The hexagrams of the I Ching are interpreted as the upper trigram representing external forces and the lower trigram representing internal forces. 
            Such an interpretation is consistant with commentary within the I Ching itself.
            For example, commentary for hexagram 10 reads "It is a joyful response to the creativity of heaven."
            The lower trigram, Lake, is also known as Joy.
            The upper trigram, Sky, is also known as Heaven.
        </div>
        <div style="margin: 10px 0px 0px 0px;">For the Zodiac, signs are either Cardnal, Fixed, or Mutable.
            For the Zodiac I Ching, these are rendered as Future, Present, and Past.
            Fire, Air, Water, and Earth are rendered as Action, Thought, Emotions, and World.
            So Aries, being Cardnal Fire, would be rendered as Future Action.
            This not an attempt to change the meanings of the signs, I simply felt such a rendering made the meaning of the signs clearer in this context.
        </div>
        <div style="margin: 10px 0px 0px 0px;">Additionally, the external (upper) trigram can be interpreted as an individual's sun sign and the internal (lower) trigram can be interpreted as their rising sign.</div>
        <div style="font-size: 1.5em; font-weight: bold; margin: 20px 0px 0px 0px;">Lo Shu</div>
        <div>Lo Shu is a magic square where all the horizontal rows, vertical columns, and the two diagonals all add up to the number 15.
            There a several correspondences assigned to each of the nine cells or palaces of the Lo Shu, including two trigrams, colors, and compass directions.
            Note that there is an "Earlier Heaven" trigram and a "Later Heaven" trigram corresponding with 8 of the palaces.
            Earlier Heaven relates to the physical world, Later Heaven relates to the metaphysical world.
            Also note the compass directions are rotated 180 degrees, following the ancient Chinese custom.
        <table style="font-family: 'Arial Narrow', Arial, sans-serif; margin: 20px 0px 0px 0px;">
            <tr>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: MediumSeaGreen; cursor: default;">
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <div style="text-align: center;">4</div>
                        <div style="text-align: center;">Southeast</div>
                        <div style="text-align: center;">Wu Xing: Wood</div>
                        <div style="text-align: center;">Early Heaven Trigram: ☱ Lake</div>
                        <div style="text-align: center;">Later Heaven Trigram: ☴ Wind</div>
                </th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: Red; cursor: default;">
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <div style="text-align: center;">9</div>
                        <div style="text-align: center;">South</div>
                        <div style="text-align: center;">Wu Xing: Fire</div>
                        <div style="text-align: center;">Early Heaven Trigram: ☷ Earth</div>
                        <div style="text-align: center;">Later Heaven Trigram: ☲ Fire</div>
                    </div>
                </th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: Orange; cursor: default;">
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <div style="text-align: center;">2</div>
                        <div style="text-align: center;">Southwest</div>
                        <div style="text-align: center;">Wu Xing: Earth</div>
                        <div style="text-align: center;">Early Heaven Trigram: ☴ Wind</div>
                        <div style="text-align: center;">Later Heaven Trigram: ☷ Earth</div>
                    </div>
                </th>
            </tr>
            <tr>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: Green; cursor: default;">
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <div style="text-align: center;">3</div>
                        <div style="text-align: center;">East</div>
                        <div style="text-align: center;">Wu Xing: Wood</div>
                        <div style="text-align: center;">Early Heaven Trigram: ☲ Fire</div>
                        <div style="text-align: center;">Later Heaven Trigram: ☳ Thunder</div>
                </th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: Yellow; cursor: default;">
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <div style="text-align: center;">5</div>
                        <div style="text-align: center;">Center</div>
                        <div style="text-align: center;">Wu Xing: Earth</div>
                        <div style="text-align: center;">Early Heaven Trigram: None</div>
                        <div style="text-align: center;">Later Heaven Trigram: None</div>
                    </div>
                </th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: Brown; cursor: default;">
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <div style="text-align: center;">7</div>
                        <div style="text-align: center;">West</div>
                        <div style="text-align: center;">Wu Xing: Metal</div>
                        <div style="text-align: center;">Early Heaven Trigram: ☵ Water</div>
                        <div style="text-align: center;">Later Heaven Trigram: ☱ Lake</div>
                    </div>
                </th>
            </tr>
            <tr>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: Khaki; cursor: default;">
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <div style="text-align: center;">8</div>
                        <div style="text-align: center;">Northeast</div>
                        <div style="text-align: center;">Wu Xing: Earth</div>
                        <div style="text-align: center;">Early Heaven Trigram: ☳ Thunder</div>
                        <div style="text-align: center;">Later Heaven Trigram: ☶ Mouintain</div>
                </th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: Blue; cursor: default;">
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <div style="text-align: center;">1</div>
                        <div style="text-align: center;">North</div>
                        <div style="text-align: center;">Wu Xing: Water</div>
                        <div style="text-align: center;">Early Heaven Trigram: ☰ Heaven</div>
                        <div style="text-align: center;">Later Heaven Trigram: ☵ Water</div>
                    </div>
                </th>
                <th style="width: 10em; height: 1.5em; border: 1px solid black; background-color: Lavender; cursor: default;">
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <div style="text-align: center;">6</div>
                        <div style="text-align: center;">Northwest</div>
                        <div style="text-align: center;">Wu Xing: Metal</div>
                        <div style="text-align: center;">Early Heaven Trigram: ☶ Mountain</div>
                        <div style="text-align: center;">Later Heaven Trigram: ☰ Heaven</div>
                    </div>
                </th>
            </tr>
        </table>
        <div style="margin: 10px 0px 0px 0px;">The 144 hexagrams of the Zodiac I Ching are organized into 16 Lo Sho tables.
            One of the 16 Lo Shu tables is shown below.
        </div>
        <table style="font-family: 'Arial Narrow', Arial, sans-serif;">
            <tr>
                <th style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">↓Internal↓</th>
                <th id="PastExternalHeader" style="width: 10em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">External ☲ ♐︎</th>
                <th id="PresentExternalHeader" style="width: 10em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">External ⚎ ♌︎</th>
                <th id="FutureExternalHeader" style="width: 10em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">External ☳ ♈︎</th>
            </tr>
            <tr>
                <th id="FirePastInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">☲ ♐︎</th>
                <td id="FirePastPastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default; background-color: LightGrey;">30. Fire</td>
                <td id="FirePresentPastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default; background-color: #F0F0F0;">66. Virtue</td>
                <td id="FireFuturePastData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default; background-color: #F0F0F0;">55. Abundance</td>
            </tr>
            <tr>
                <th id="FirePresentInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">⚎ ♌︎</th>
                <td id="FirePastPresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default; background-color: #F0F0F0;">65. Influence</td>
                <td id="FirePresentPresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default; background-color: #F0F0F0;">67. Individuality</td>
                <td id="FireFuturePresentData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">69. Ambition</td>
            </tr>
            <tr>
                <th id="FireFutureInternalHeader" style="width: 5em; height: 1.5em; border: 1px solid black; background-color: GhostWhite; cursor: default;">☳ ♈︎</th>
                <td id="FirePastFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default; background-color: #F0F0F0;">21. Biting Through</td>
                <td id="FirePresentFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default;">68. Valor</td>
                <td id="FireFutureFutureData" style="width: 10em; height: 1.5em; border: 1px solid black; cursor: default; background-color: #F0F0F0;">51. Thunder</td>
            </tr>
        </table>
        <div style="margin: 10px 0px 0px 0px;">NOTE: These 16 Lo Shu tables follow Western-style compass points, with North at the top.
            You can imagine that each Lo Shu palace is affecting the corresponding cell, in addition to any other affect on the cell from other sources.
        </div>
        <div style="font-size: 1.5em; margin: 20px 0px 0px 0px;">Story Telling and Character Arcs Using Lo Shu</div>
        <div style="margin: 10px 0px 0px 0px;">Notice that, due to the zodiac influence, time runs left to right and top to bottom in the 16 Lo Shu tables.
            Each of the three rows, each of the three columns, and both diaginals of the 16 Lo Shu tables represent a situation moving through time.
            This lets the Lo Shu tables be used as the basis for devoping stories and character arcs.
            Here are a few of the stories/character arcs in the example table above:
        </div>
        <ul style="margin: 10px 0px 0px 0px;">
            <li>Fire → Virtue → Abundance</li>
            <li>Fire → Influence → Biting Through</li>
            <li>Fire → Individuality → Thunder</li>
            <li>Abundance → Ambition → Thunder</li>
            <li>Fire → Influence → Biting Through → Valor → Thunder</li>
            <li>Fire → Influence → Biting Through → Individuality → Abundance → Ambition → Thunder</li>
            <li>Fire → Influence → Biting Through → Individuality → Ambition</li>
        </ul>
        <div style="margin: 10px 0px 0px 0px;">When you select a cell in a Lo Shu table, the other cells in the table that are part of that cell's movement through time will be highlighted using a very light grey background.
            See the example table above for an example of this effect.
        </div>
        <div style="margin: 10px 0px 0px 0px;">Finally, the various attributes of the zodiac signs and hexagrams assigned to a cell can be used to embellish a story that uses that cell.
            For example, hexagram 77, Magnetism, is described as "Present Actions externally, Present Thoughts internally. People carrying out your plan."
            It's not difficult to imagine this represents a character in a story who's having his minions carrying out his master plan.
        </div>
        <div style="margin: 10px 0px 0px 0px;">All well and good, but a closer look at the details of the hexagram show that the Sun rules the external sign of the hexagram, but is at its detriment in the internal sign.
            This could be interpreted as the minions being enthusiastic about the plan, but the character will do something to undermine that enthusiasm.
            A second look at the details shows that Saturn is at its detriment in the external sign, but rules the internal sign.
            This might mean that the way the character undermines the enthusiasm of his minions is by being too strick with them.
        </div>
    </div>
</body>
</html>